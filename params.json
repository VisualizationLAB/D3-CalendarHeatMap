{"name":"D3-calendarheatmap","tagline":"Calendar Heat Map","body":"<!DOCTYPE html>\r\n<meta charset=\"utf-8\">\r\n<style>\r\n\r\nbody {\r\n  font: 10px sans-serif;\r\n  shape-rendering: crispEdges;\r\n}\r\n\r\n.day {\r\n  //fill: #fff;\r\n  fill:rgba(179,179,179,0.2);\r\n  //stroke: #ccc;\r\n  stroke: #fff;\r\n  stroke-width: 1px;\r\n}\r\n\r\n\r\n.month {\r\n  fill: none;\r\n  //stroke: #000;\r\n  stroke: #fff;\r\n  stroke-width: 4px;\r\n  \r\n  font: 10px sans-serif;\r\n}\r\n.H1 {\r\n   font-size: 15px;\r\n   padding: 10px;\r\n  // color: rgba(102, 102, 102,1); \r\n  color: rgba(51, 102, 153,.5);\r\n   TEXT-ALIGN: CENTER;\r\n    font-weight:bold;\r\n}\r\n#summ_row1 {\r\n  //color: rgba(153, 153, 153,.7);\r\n  color: rgba(51, 102, 153,1);\r\n  stroke: red;\r\n  font-size:11px;\r\n  //font-weight:bold;\r\n}\r\n.sub_title{\r\n  //color: rgba(153, 153, 153,.7);\r\n  color: rgba(51, 102, 153,1);\r\n  stroke: red;\r\n  font-size:14px;\r\n  font-weight:bold;\r\n}\r\n.sub_titleL{\r\n  //color: rgba(153, 153, 153,.7);\r\n  color: rgba(179,179,179,0.7);\r\n  stroke: red;\r\n  font-size:14px;\r\n  font-weight:bold;\r\n}\r\n#summ_row2 {\r\n  //color: rgba(51, 102, 153,.7);\r\n  color: rgba(51, 102, 153,1);\r\n  stroke: red;\r\n  font-size:20px;\r\n}\r\n.summ_row4 {\r\n  //color: rgba(51, 102, 153,.7);\r\n  color: rgba(51, 102, 153,1);\r\n  stroke: red;\r\n  font-size:20px;\r\n}\r\n\r\n#summ_Line {\r\n\tcellpadding: 10px;\r\n\tfont-size:20px;\r\n}\r\ntable.control_2:hover {\r\n  fill: red;\r\n}\r\n\r\n.control_1_2 { \r\ncell-padding: 10;\r\n}\r\n\r\n#currDate{\r\n  //color: rgba(51, 102, 153,.7);\r\n  color: rgba(51, 102, 153,1);\r\n  font-size:40px;\r\n}\r\n\r\n.C4{\r\n   height: 250px;\r\n   //border: 2px solid #F00;\r\n   border: none;\r\n   width: 1000px;\r\n    //padding: 3px;\r\n    overflow: auto;\r\n\r\n    /* POSITION */\r\n    position:fixed;\r\n}\r\n\r\n\r\n\r\n.q10-11{fill:rgba(0,104,55,1)}\r\n.q9-11{fill:rgba(0,104,55,.9)}\r\n.q8-11{fill:rgba(0,104,55,.8)}\r\n.q7-11{fill:rgba(0,104,55,.7)}\r\n.q6-11{fill:rgba(0,104,55,.6)}\r\n.q5-11{fill:rgba(0,104,55,.5)}\r\n\r\n.q4-11{fill:rgba(0,104,55,.4)}\r\n.q3-11{fill:rgba(0,104,55,.3)}\r\n.q2-11{fill:rgba(0,104,55,.2)}\r\n.q1-11{fill:rgba(0,104,55,.1)}\r\n.q0-11{fill:rgba(0,104,55,.075)}\r\n.Nq0-11{fill:rgba(255,255,0,.2)}\r\n\r\n\r\n.qE10-11{fill:rgba(165,0,38,1)}\r\n.qE9-11{fill:rgba(165,0,38,.9)}\r\n.qE8-11{fill:rgba(165,0,38,.8)}\r\n.qE7-11{fill:rgba(165,0,38,.7)}\r\n.qE6-11{fill:rgba(165,0,38,.6)}\r\n.qE5-11{fill:rgba(165,0,38,.5)}\r\n\r\n.qE4-11{fill:rgba(165,0,38,.4)}\r\n.qE3-11{fill:rgba(165,0,38,.3)}\r\n.qE2-11{fill:rgba(165,0,38,.2)}\r\n.qE1-11{fill:rgba(165,0,38,.1)}\r\n.qE0-11{fill:rgba(165,0,38,.075)}\r\n.NqE0-11{fill:rgba(0,104,55,.3)}\r\n\r\n</style>\r\n<body>\r\n<script src=\"http://d3js.org/d3.v3.min.js\"></script>\r\n<script src=\"http://d3js.org/queue.v1.min.js\"></script>\r\n<link rel=\"stylesheet\" href=\"http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css\" />\r\n<script src=\"http://code.jquery.com/jquery-1.8.2.js\"></script>\r\n<script src=\"http://code.jquery.com/ui/1.9.0/jquery-ui.js\"></script>\r\n<link rel=\"stylesheet\" href=\"style.css\" />\r\n<script>\r\n\r\n\t\r\nvar width = 960,\r\n    height = 150,\r\n    cellSize = 17; // cell size\r\n\r\nvar dataOriginal;\r\nvar arrayRange = 12;\r\nvar domainMax = 20000000;\r\nvar domainMin = 0;\r\n//Controls\r\nvar select_1 = \"tot\";\r\nvar strSelectID = \"TOTAL LOADED RECORDS\";\r\nvar select_Class = \"\";\r\nvar BIGDATA = [];\r\nvar selectedDate = \"\"\r\n\r\nvar SummaryData = [];\r\nvar SelectedData = [];\r\n\r\nvar day = d3.time.format(\"%w\"),\r\n    week = d3.time.format(\"%U\"),\r\n    percent = d3.format(\".1%\"),\r\n    format = d3.time.format(\"%Y-%m-%d\");\r\n\t//format2 = d3.time.format(\"%a-%b-%e-%d\");\r\n\r\n\r\n\r\nvar mainTable = d3.select(\"body\")\r\n\t\t.attr(\"onload\", \"loadData()\")\r\n\t\t.append(\"table\")\r\n\t\t.attr(\"class\" , \"main\")\r\n\t\t.attr(\"id\" , \"main\")\r\n\t\t.attr(\"border\", 0)\r\n\t\t.attr(\"cellpadding\", 15)\r\n\t\t.attr(\"width\", \"100%\")\r\n\t\t.attr(\"height\", \"100%\");\r\n\t\t\r\nmainTable.append(\"tr\")\r\n\t.attr(\"class\" , \"H1\")\r\n\t.append(\"td\")\r\n\t.attr(\"align\", \"center\")\r\n\t.attr(\"colspan\", 3)\r\n\t.text( function(d) {return \"JIVA DATA LOAD REPORT ANALYTICS\" });\r\n\r\nmainTable.append(\"tr\")\r\n\t.attr(\"class\", \"details\")\r\n\t.append(\"td\")\r\n\t.attr(\"id\", \"currDate\")\r\n\t.attr(\"align\", \"center\")\r\n\t.attr(\"valign\", \"top\")\r\n\t.text( function(d) {\r\n\t\t//var format2 = d3.time.format(\"%a\");\r\n\t\t//var newStrdate = format2.parse(Date());\r\n\t\t//var newStrdate = Date().substring(0,15);\r\n\t\tvar d2 = new Date();\r\n\t\tnewStrdate = buildDataview (d2,\"\");\r\n\t\t//console.log(\"newStrdate\")\r\n\t\t//console.log(Date().substring(0,15))\r\n\t\t//console.log(newStrdate)\r\n\t\t\r\n\t\tselectedDate = newStrdate;\r\n\t\tnewStrdateX = buildDisplayDate(selectedDate);\r\n\t\treturn newStrdateX;\r\n\t\t});\r\n\t\r\nmainTable.append(\"tr\")\r\n\t.attr(\"class\", \"control_1\");\r\n\t\r\nmainTable.append(\"tr\")\r\n\t.append(\"td\")\r\n\t.attr(\"align\", \"center\")\r\n\t.append(\"table\")\r\n\t//.attr(\"width\", \"100%\")\r\n\t.append(\"tr\")\r\n\t.attr(\"class\", \"detailsR\");\r\n\t//.append(\"td\");\r\n\t//.text( function(d) {return \"JIVA DATA LOAD REPORT ANALYTICS\" });\r\n\r\nd3.select(\".detailsR\").append(\"td\")\r\n\t.attr(\"class\",\"sub_titleL\")\r\n\t.attr(\"id\",\"sub_titleL\")\r\n\t.attr(\"align\", \"right\")\r\n\t.text(\"CALENDAR HEAT MAP FOR\");\r\n\t\r\nd3.select(\".detailsR\").append(\"td\")\r\n\t.attr(\"class\",\"sub_title\")\r\n\t.attr(\"id\",\"sub_title\")\r\n\t.attr(\"align\", \"left\")\r\n\t.text(strSelectID);\r\n\t\r\nmainTable.append(\"tr\")\r\n\t.attr(\"class\", \"legendCR\");\r\n\r\n/*mainTable.append(\"tr\")\r\n\t.attr(\"class\", \"details\")\r\n\t.append(\"td\");\r\n\t//.text( function(d) {return \"JIVA DATA LOAD REPORT ANALYTICS\" });*/\r\n\r\nmainTable.append(\"tr\")\r\n\t.attr(\"class\", \"details\")\r\n\t.append(\"td\")\r\n\t.attr(\"class\",\"sub_titleL\")\r\n\t.attr(\"id\",\"sub_titleL\")\r\n\t.attr(\"align\", \"center\")\r\n\t.text( function(d) {return \"SUMMARY\" });\r\n\t\r\nmainTable.append(\"tr\")\r\n\t.attr(\"class\", \"control_2\");\r\n\r\n//--Summary Section row 1 --//\r\n\t\r\nd3.select(\".control_1\").append(\"td\")\r\n\t.attr(\"width\", \"100%\")\r\n\t.attr(\"align\", \"center\")\r\n\t.append(\"table\")\r\n\t.attr(\"class\", \"summary\")\r\n\t.attr(\"width\", \"100%\")\r\n\t.attr(\"border\", 0)\r\n\t.attr(\"cellpadding\", 5)\r\n\t.append(\"tr\")\r\n\t.attr(\"class\",\"summ_row1\")\r\n\t.attr(\"id\",\"summ_row1\")\r\n\t.attr(\"align\",\"center\");\r\n\t/*.append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.text(\"DATE\")*/\r\n\t\r\n///--mouseover /out functions ----//\r\nfunction mouseOver(Ind) {\r\n\t\t\tselect_1 = Ind;\r\n\t\t\tconsole.log(\"document.getElementById(select_1).value\");\r\n\t\t\tconsole.log(document.getElementById(select_1).textContent);\r\n\t\t\tvar textVal = document.getElementById(select_1).textContent;\r\n\t\t\tstrSelectID  = textVal;\r\n\t\t\td3.select(\"#sub_title\").text(textVal);\r\n\t\t\td3.selectAll(\"svg\").remove();\r\n\t\t\tconsole.log(select_1)\r\n\t\t\tdrawCalender(select_1);\r\n\t\t\t\r\n}\r\n\r\nfunction mouseOut(Ind) {\r\n\t\t\tselect_1 = Ind;\r\n\t\t\td3.selectAll(\"svg\").remove();\r\n\t\t\tdrawCalender(select_1);\r\n}\r\n///--mouseover /out functions END----//\r\n\r\nd3.select(\".summ_row1\").append(\"td\")\r\n\t.attr(\"align\", \"right\")\r\n\t.attr(\"id\", \"upd\")\r\n\t.text(\"UPDATED RECORDS\")\r\n\t.on(\"mouseover\", function(d) {mouseOver (this.id); return;})\r\n\r\nd3.select(\".summ_row1\").append(\"td\")\r\n\t.attr(\"align\", \"right\")\r\n\t.attr(\"id\", \"new\")\r\n\t.text(\"INSERTED RECORDS\")\r\n\t.on(\"mouseover\", function(d) {mouseOver (this.id); return;})\r\n\t\r\nd3.select(\".summ_row1\").append(\"td\")\r\n\t.attr(\"align\", \"right\")\r\n\t.attr(\"id\", \"tot\")\r\n\t.text(\"TOTAL LOADED RECORDS\")\r\n\t.on(\"mouseover\", function(d) {mouseOver (this.id); return;})\r\n\t  \r\nd3.select(\".summ_row1\").append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.attr(\"id\", \"err\")\r\n\t.text(\"FAILED RECORDS\")\r\n\t.attr(\"style\", \"color:red;\")\r\n\t.on(\"mouseover\", function(d) {mouseOver (this.id); return;})\r\n\t  \r\nd3.select(\".summ_row1\").append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.attr(\"id\", \"durH\")\r\n\t.text(\"LOAD TIME (Hrs)\")\r\n\t.on(\"mouseover\", function(d) {mouseOver (this.id); return;})\r\nd3.select(\".summ_row1\").append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.text(\"FILE TYPES\")\r\nd3.select(\".summ_row1\").append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.attr(\"style\", \"color:red;\")\r\n\t.text(\"ERROR TYPES\")\r\n\t\r\n//--Summary Section row 2 --//\r\nd3.select(\".summary\").append(\"tr\")\r\n\t.attr(\"class\",\"summ_row2\")\r\n\t.attr(\"id\",\"summ_row2\")\r\n\t.attr(\"align\",\"center\");\r\n\t/*.append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.text(\"NA\")*/\r\nd3.select(\".summ_row2\").append(\"td\")\r\n\t.attr(\"align\", \"right\")\r\n\t.attr(\"id\",\"dupd\")\r\n\t.text(\"NA\")\r\n\t\r\nd3.select(\".summ_row2\").append(\"td\")\r\n\t.attr(\"align\", \"right\")\r\n\t.attr(\"id\",\"dnew\")\r\n\t.text(\"NA\")\r\n\t\r\nd3.select(\".summ_row2\").append(\"td\")\r\n\t.attr(\"align\", \"right\")\r\n\t.attr(\"id\",\"dtot\")\r\n\t.text(\"NA\")\r\nd3.select(\".summ_row2\").append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.attr(\"id\",\"derr\")\r\n\t.attr(\"style\", \"color:red;\")\r\n\t.text(\"NA\")\r\n\r\nd3.select(\".summ_row2\").append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.attr(\"id\",\"ddurH\")\r\n\t.text(\"NA\")\r\nd3.select(\".summ_row2\").append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.attr(\"id\",\"dfile\")\r\n\t.text(\"NA\")\r\nd3.select(\".summ_row2\").append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.attr(\"id\",\"derrM\")\r\n\t.attr(\"style\", \"color:red;\")\r\n\t.text(\"NA\")\r\n//--SUMARY - WHITE LINE --//\r\n/*d3.select(\".summary\").append(\"tr\")\r\n\t.attr(\"class\",\"summ_Line\")\r\n\t.attr(\"id\",\"summ_Line\")\r\n\t.attr(\"align\",\"center\")\r\n\t.append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.text(\"SUMMARY\")*/\r\n\t\r\n// ---SUMARY SECTION - ROW 3 and 4\r\nd3.select(\".control_2\").append(\"td\")\r\n\t.attr(\"width\", \"100%\")\r\n\t.attr(\"align\", \"center\")\r\n\t.append(\"table\")\r\n\t.attr(\"class\", \"summaryB\")\r\n\t.attr(\"width\", \"100%\")\r\n\t.attr(\"border\", 0)\r\n\t.attr(\"cellpadding\", 5)\r\n\t.append(\"tr\")\r\n\t.attr(\"class\",\"summ_row3\")\r\n\t.attr(\"id\",\"summ_row1\")\r\n\t.attr(\"align\",\"center\");\r\nd3.select(\".summ_row3\").append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.attr(\"id\", \"Snew\")\r\n\t.text(\"INSERTED RECORDS\")\r\n\t//.on(\"mouseover\", function(d) {mouseOver (this.id); return;})\r\nd3.select(\".summ_row3\").append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.attr(\"id\", \"Supd\")\r\n\t.text(\"UPDATED RECORDS\");\r\nd3.select(\".summ_row3\").append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.text(\"TOTAL DAYS\");\r\n\t/*.append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.text(\"DATE\")*/\r\n\t\r\nd3.select(\".summ_row3\").append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.attr(\"id\", \"Stot\")\r\n\t.attr(\"align\", \"right\")\r\n\t.text(\"TOTAL LOADED RECORDS\")\r\n\t//.on(\"mouseover\", function(d) {mouseOver (this.id); return;})\r\n\t  \r\nd3.select(\".summ_row3\").append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.attr(\"id\", \"Serr\")\r\n\t.attr(\"style\", \"color:red;\")\r\n\t.text(\"FAILED RECORDS\")\r\n\t//.on(\"mouseover\", function(d) {mouseOver (this.id); return;})\r\n\t  \r\n\r\n\t//.on(\"mouseover\", function(d) {mouseOver (this.id); return;})\r\nd3.select(\".summ_row3\").append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.attr(\"id\", \"SdurH\")\r\n\t.text(\"LOAD TIME (Hrs)\")\r\n\t//.on(\"mouseover\", function(d) {mouseOver (this.id); return;})\r\nd3.select(\".summ_row3\").append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.text(\"FILE TYPES\")\r\n\r\nd3.select(\".summ_row3\").append(\"td\")\r\n\t.attr(\"align\", \"right\")\r\n\t.attr(\"style\", \"color:red;\")\r\n\t.text(\"TOTAL ERROR DAYS\")\r\n\t\r\nd3.select(\".summ_row3\").append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.attr(\"style\", \"color:red;\")\r\n\t.text(\"ERROR TYPES\")\r\n\r\n\t\r\n//--Summary Section row 2 --//\r\nd3.select(\".summaryB\").append(\"tr\")\r\n\t.attr(\"class\",\"summ_row4\")\r\n\t.attr(\"align\",\"center\");\r\n\t/*.append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.text(\"NA\")*/\r\nd3.select(\".summ_row4\").append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.attr(\"id\",\"Sdupd\")\r\n\t.text(\"NA\")\r\n\t\r\nd3.select(\".summ_row4\").append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.attr(\"id\",\"Sdnew\")\r\n\t.text(\"NA\")\r\nd3.select(\".summ_row4\").append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.attr(\"id\",\"SdDAYS\")\r\n\t.text(\"NA\")\r\nd3.select(\".summ_row4\").append(\"td\")\r\n\t.attr(\"align\", \"right\")\r\n\t.attr(\"id\",\"Sdtot\")\r\n\t.text(\"NA\")\r\nd3.select(\".summ_row4\").append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.attr(\"id\",\"Sderr\")\r\n\t.attr(\"style\", \"color:red;\")\r\n\t.text(\"NA\")\r\nd3.select(\".summ_row4\").append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.attr(\"id\",\"SddurH\")\r\n\t.text(\"NA\")\r\nd3.select(\".summ_row4\").append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.attr(\"id\",\"Sdfile\")\r\n\t.text(\"NA\")\r\nd3.select(\".summ_row4\").append(\"td\")\r\n\t.attr(\"align\", \"right\")\r\n\t.attr(\"id\",\"SderrDAYS\")\r\n\t.attr(\"style\", \"color:red;\")\r\n\t.text(\"NA\")\r\nd3.select(\".summ_row4\").append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.attr(\"id\",\"SderrM\")\r\n\t.attr(\"style\", \"color:red;\")\r\n\t.text(\"NA\")\r\n\t\r\n//--Summary Section END --//\t\r\n\t\r\nd3.select(\".row2\")\r\n\t.append(\"td\")\r\n\t.attr(\"width\", 500)\r\n\t.attr(\"id\", \"year\")\r\n\t.attr(\"align\", \"left\")\r\n\t.append(\"div\")\r\n\t.attr(\"id\", \"slider-range\")\r\n\t.attr(\"style\", \"display:none;\")\r\n\t.on( \"click\", function(d) { \r\n\t\t//console.log(this.value)\r\n\t\t});\r\n\r\n\r\n\t\r\n// ++++++++ Calendar section\r\nd3.select(\".legendCR\")\r\n\t.append(\"table\")\r\n\t.append(\"tr\")\r\n\t.attr(\"class\", \"C3\")\r\n\t.append(\"td\")\r\n\t.attr(\"class\", \"legendC\")\r\n\t.attr(\"align\", \"center\");\r\n\t//.attr(\"width\", \"100%\");\r\n\t\r\nd3.select(\".C3\")\r\n\t.append(\"td\")\r\n\t.attr(\"class\", \"C4\")\r\n\t.attr(\"valign\" , \"top\");\r\n// ++++++++ Calendar section END\r\n\r\n$(function() {\r\n    $( \"#slider-range\" ).slider({\r\n    range: true,\r\n    min: 0,\r\n\tmax: 1000,\r\n\tvalues: [2012,2013],\r\n    slide: function( event, ui ) {\r\n    var maxv = d3.min([ui.values[1], 10]);\r\n    var minv = d3.max([ui.values[0], 0]);\r\n    }});\r\n    });\r\n\r\nfunction loadData () {\r\n\r\n queue()\r\n\t.defer(d3.csv, \"Calendar.csv\")\r\n\t.await(ready);\r\n}\r\nvar arrDates = [];\r\nvar arrFail = [];\r\nvar arrVol = [];\r\nvar arrNew = [];\r\nvar arrUpd = [];\r\nvar arrDurHrs = [];\r\nvar arrFileLayout = [];\r\nvar arrErrMsgs = [];\r\nvar objData = [];\r\n\r\nfunction ready(error, dataCsv) {\r\nconsole.log(\"dataCsv\");\r\nconsole.log(dataCsv);\t\r\ndataOriginal = dataCsv;\r\n\r\ndataOriginal.forEach(function(d){ \r\n\t\tconsole.log(d.Date);\r\n\t\tarrDates.push(d.Date);\r\n\t\tarrFail.push(parseInt(d.Tot_Failures));\r\n\t\tarrVol.push(parseInt(d.Tot_Records));\r\n\t\tarrNew.push(parseInt(d.Tot_Inserts));\r\n\t\tarrUpd.push(parseInt(d.Tot_Updates));\r\n\t\tarrDurHrs.push(d3.round(Number(d.Tot_Duration_Hrs),2));\r\n\t\tarrFileLayout.push(d.File_Layouts);\r\n\t\tarrErrMsgs.push(d.Error_Msgs);\r\n\t\tvar datarow = {\r\n\t\t\t\t\t\t\"Date\" : d.Date,\r\n\t\t\t\t\t\t\"Tot_Records\" :  parseInt(d.Tot_Records),\r\n\t\t\t\t\t\t\"Tot_Inserts\" : parseInt(d.Tot_Inserts),\r\n\t\t\t\t\t\t\"Tot_Updates\" : parseInt(d.Tot_Updates),\r\n\t\t\t\t\t\t\"Tot_Failures\" : parseInt(d.Tot_Failures),\r\n\t\t\t\t\t\t\"Tot_Duration_Secs\" : d3.round(Number(d.Tot_Duration_Secs),2),\r\n\t\t\t\t\t\t\"Tot_Duration_Hrs\" : d3.round(Number(d.Tot_Duration_Hrs),2),\r\n\t\t\t\t\t\t\"File_Layouts\" : d.File_Layouts,\r\n\t\t\t\t\t\t\"Error_Msgs\" : d.Error_Msgs\r\n\t\t\t\t\t\t};\r\n\t\tBIGDATA.push(datarow);\r\n\t\t//console.log(\"d.Tot_Failures\");\r\n\t\t//console.log(d.Tot_Failures);\r\n\t\t//console.log(arrFail);\r\n\t\t})\r\n//console.log(\"BIGDATA\");\r\n//console.log(BIGDATA);\r\nbuildSummaryData ();\r\ndrawCalender(select_1);\r\n//console.log(\"onload() : \" + selectedDate);\r\n\r\nvar d = new Date();\r\nselectedDate = buildDataview (d, \"\");\r\nvar selectedDateD = buildDisplayDate (selectedDate);\r\nconsole.log(selectedDate)\r\ndocument.getElementById(selectedDate).focus();\r\nbuildSelectData(selectedDate, \"\");\r\n/*console.log(\"document.getElementById(selectedDate).class\")\r\nvar selectedClass = document.getElementById(selectedDate).className.baseVal;\r\nif (selectedClass == \"day\") \r\n\t{\r\n\tconsole.log(d3.select(selectedClass));\r\n\t//d3.select(selectedClass).style(\"stroke:red\");\r\n\t}*/\r\n}\r\n\r\n\r\n\t\r\n//console.log(\"OUTSIDE\")\r\n//console.log(BIGDATA);\r\n//console.log(dataOriginal);\t\r\n//console.log(arrFail);\r\n//console.log(arrVol);\t\r\n\r\nfunction getDomainMax(val) {\r\nswitch (val)\r\n{\r\ncase \"tot\":\r\n  domainMax = d3.max(arrVol)\r\n  break;\r\ncase \"err\":\r\n  domainMax = d3.max(arrFail)\r\n  break;\r\ncase \"new\":\r\n  domainMax = d3.max(arrNew)\r\n  break;\r\ncase \"upd\":\r\n  domainMax = d3.max(arrUpd)\r\n  break;\r\ncase \"durH\":\r\n  domainMax = d3.max(arrDurHrs)\r\n  break;\r\n}\r\n//return domainMax;\r\n}\r\n\r\nfunction getData(val,opt1,opt2,opt3,opt4,opt5) {\r\nswitch (val)\r\n{\r\ncase \"tot\":\r\n  vData = opt1\r\n  break;\r\ncase \"err\":\r\n  vData = opt2\r\n  break;\r\ncase \"new\":\r\n  vData = opt3\r\n  break;\r\ncase \"upd\":\r\n  vData = opt4\r\n  break;\r\ncase \"durH\":\r\n  vData = opt5\r\n  break;\r\n}\r\nreturn vData;\r\n}\r\n\r\n// -- calendar building starts --//\r\nfunction drawCalender(ind) {\r\n\r\n//console.log(\"BIGDATA-drawCalender\");\r\n//console.log(BIGDATA);\r\nvar d = new Date();\r\nbuildDataview (d, \"\");\r\nconsole.log(\"drawCalender\");\r\nconsole.log(selectedDate);\r\nvar dataBIG = d3.nest()\r\n\t\t\t.key(function(d) { return d.Date; })\r\n\t\t\t.rollup(function(d) { //console.log(select_1); \r\n\t\t\t\t\t\t\t\t\tvar dataVal = getData(select_1,parseInt(d[0].Tot_Records),parseInt(d[0].Tot_Failures),parseInt(d[0].Tot_Inserts),parseInt(d[0].Tot_Updates),Number(d[0].Tot_Duration_Hrs));\r\n\t\t\t\t\t\t\t\t\treturn dataVal;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t.map(BIGDATA);\r\nconsole.log(\"dataBIG-drawCalender\");\r\nconsole.log(dataBIG);\t\t\t\r\n\r\ngetDomainMax(select_1,\"domainMax\");\r\n\r\n\tconsole.log(\"domainMax\");\r\n\tconsole.log(domainMax);\r\n\tconsole.log(select_1);\r\n\t\r\nvar color = d3.scale.quantize()\r\n   .domain([domainMin,domainMax])\r\n    .range(d3.range(arrayRange-1).map(function(d) { \r\n\t\t\t\t\t\t\tvar strVal = \"\";\r\n\t\t\t\t\t\t\tif (select_1 == \"err\" || select_1 == \"durH\" ) \r\n\t\t\t\t\t\t\t{ \r\n\t\t\t\t\t\t\t\tstrVal = \"qE\" + d + \"-11\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse \r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tstrVal = \"q\" + d + \"-11\";\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t//console.log(strVal);\r\n\t\t\t\t\t\t\treturn strVal; \r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t));\r\n\r\n\r\nconsole.log(color.domain());\r\nvar svg = d3.select(\".C4\").selectAll(\"svg\")\r\n\t.data(d3.range(2013, 2014))\r\n  .enter().append(\"svg\")\r\n    .attr(\"width\", width)\r\n    .attr(\"height\", height)\r\n    .attr(\"class\", \"RdYlGn\")\r\n  .append(\"g\")\r\n    .attr(\"transform\", \"translate(\" + ((width - cellSize * 53) / 2) + \",\" + (height - cellSize * 7 - 1) + \")\");\r\n\r\nsvg.append(\"text\")\r\n    .attr(\"transform\", \"translate(-6,\" + cellSize * 3.5 + \")rotate(-90)\")\r\n    .style(\"text-anchor\", \"middle\")\r\n    .text(function(d) { return d; });\r\n\r\nvar rect = svg.selectAll(\".day\")\r\n    .data(function(d) { return d3.time.days(new Date(d, 0, 1), new Date(d + 1, 0, 1)); })\r\n\t.enter()\r\n\t.append(\"rect\")\r\n    .attr(\"class\", \"day\")\r\n\t.attr(\"id\", function(d) { return d;})\r\n    .attr(\"width\", cellSize)\r\n    .attr(\"height\", cellSize)\r\n    .attr(\"x\", function(d) { return week(d) * cellSize; })\r\n    .attr(\"y\", function(d) { return day(d) * cellSize; })\r\n\t.on(\"mouseover\", function(d) { \r\n\t\t//console.log(\"rect : \" + d);\r\n\t\tbuildSelectData(d, \"day\");\r\n\t})\r\n\t.attr(\"id\", function(d) { var strDate = buildDataview(d, \"\"); return strDate;})\r\n    .datum(format);\r\n\t\r\nrect.append(\"title\")\r\n   .text(function(d) { return d; });\r\n\t//.text(function(d) { return this.id; });\r\n\r\nsvg.selectAll(\".month\")\r\n    .data(function(d) { return d3.time.months(new Date(d, 0, 1), new Date(d + 1, 0, 1)); })\r\n  .enter().append(\"path\")\r\n    .attr(\"class\", \"month\")\r\n    .attr(\"d\", monthPath);\r\n\r\n\t\r\n\tvar month_name = d3.time.format(\"%B\")\r\n\r\nsvg.selectAll(\"text.month\")\r\n    .data(function(d) { return d3.time.months(new Date(d, 0, 1), new Date(d + 1, 0, 1)); })\r\n  .enter().append(\"text\")\r\n    .attr(\"class\", \"monthTxt\")\r\n    .attr(\"x\", function(d) { return week(d) * cellSize+25; })\r\n\t.attr(\"y\", -5)\r\n\t.attr(\"transform\", \"translate(0,0)\")\r\n    .attr(\"style\", \"text-anchor:left;\")\r\n    .text(month_name);\r\n\t\r\nvar ScaleArr = [\"NA\", \"0\" ];\r\nvar LScaleArr = [\"NA\",\"0\"];\r\nvar DataArr = [];\r\n\r\n\r\nrect.filter(function(d) { return d in dataBIG; })\r\n\t.attr(\"class\", function(d) { \r\n\t\t\t\t\t\t\tDataArr.push(dataBIG[d]);\r\n\t\t\t\t\t\t\tif (dataBIG[d] == 0) \r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t//console.log(\"day N\" + color(dataBIG[d]));\r\n\t\t\t\t\t\t\t\treturn \"day N\" + color(dataBIG[d]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse \r\n\t\t\t\t\t\t\t{\t\r\n\t\t\t\t\t\t\t//console.log(\"day \" + color(dataBIG[d]));\r\n\t\t\t\t\t\t\treturn \"day \" + color(dataBIG[d]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t})\r\n\t.on(\"mouseover\", function(d) { \r\n\t\tif (dataBIG[d] == 0) \r\n\t\t\t{\r\n\t\t\t\t//console.log(\"day N\" + color(dataBIG[d]));\r\n\t\t\t\tvar strClass =  \"day N\" + color(dataBIG[d]);\r\n\t\t\t}\r\n\t\telse \r\n\t\t\t{\t\r\n\t\t\t\t//console.log(\"day \" + color(dataBIG[d]));\r\n\t\t\tvar strClass = \"day \" + color(dataBIG[d]);\r\n\t\t\t}\r\n\t\t//console.log(dataBIG[d] + \" | \" + d + \"|\" + strClass);\t\t\t\t\r\n\t\tbuildSelectData (d,strClass);\r\n\t} )\r\n\t.attr(\"id\", function(d) { \r\n\t\t//console.log(\"dataBIG-drawCalender\"); \r\n\t\treturn d;})\r\n\t.select(\"title\")\r\n\t.text(function(d) { \r\n\t\t\treturn d + \": \" + addCommas(dataBIG[d]); \r\n\t\t});\r\n\r\n\t\r\nvar increment  = (d3.max(DataArr) - d3.min(DataArr))/arrayRange;\r\nvar Lbound = d3.min(DataArr);\r\nfor (var i=1; i<(arrayRange+1); i++)\r\n{\r\n\tScaleArr.push(parseInt(Lbound + i* increment));\r\n\tLScaleArr.push(parseInt(Lbound + (i-1)* increment));\r\n\t//console.log(ScaleArr.length);\r\n}\r\nScaleArr[ScaleArr.length-1] = d3.max(DataArr);\r\n\r\nbuildLegend ();\t\t\t\t\r\n\r\n\r\n////++++++++++++++++++++++++++++++++++++++++\r\nfunction monthPath(t0) {\r\n  var t1 = new Date(t0.getFullYear(), t0.getMonth() + 1, 0),\r\n      d0 = +day(t0), w0 = +week(t0),\r\n      d1 = +day(t1), w1 = +week(t1);\r\n  return \"M\" + (w0 + 1) * cellSize + \",\" + d0 * cellSize\r\n      + \"H\" + w0 * cellSize + \"V\" + 7 * cellSize\r\n      + \"H\" + w1 * cellSize + \"V\" + (d1 + 1) * cellSize\r\n      + \"H\" + (w1 + 1) * cellSize + \"V\" + 0\r\n      + \"H\" + (w0 + 1) * cellSize + \"Z\";\r\n}\r\n\r\nfunction buildLegend () {\r\n\r\n//console.log(ScaleArr);\t\r\nvar legend = d3.select(\".legendC\")\r\n.append(\"svg\")\r\n      .attr(\"class\", \"legend\")\r\n\t  .attr(\"width\", cellSize * 10)\r\n      .attr(\"height\", (cellSize * arrayRange) + 2 * cellSize)\r\n\t  .selectAll(\"g\")\r\n\t  .data(ScaleArr)\r\n    .enter().append(\"g\")\r\n      .attr(\"transform\", function(d, i) { return \"translate(120,\" + i * 20 + \")\"; });\r\n\t\t\t\t\t\t\r\nlegend.append(\"rect\")\r\n      .attr(\"width\", cellSize )\r\n      .attr(\"height\", cellSize )\r\n\t  .attr(\"class\" , function(d, i){ \r\n\t\t\t\t\t\t\tvar strClass = \"\"\r\n\t\t\t\t\t\t\t//console.log(\"color(d) : \" + color(d) + \" | d: \" + d + \" | i: \" + i); \r\n\t\t\t\t\t\t\tif (i>1) \r\n\t\t\t\t\t\t\t\tstrClass = color(d)\r\n\t\t\t\t\t\t\telse \r\n\t\t\t\t\t\t\t\tif ( i ==1 ) strClass = \"N\" + color(d)\r\n\t\t\t\t\t\t\t\telse strClass = \"day\"\r\n\t\t\t\t\t\t\treturn strClass ;})\r\n\t.attr(\"id\" , function(d, i){ \r\n\t\t\t\t\t\t\tvar strClass = \"\"\r\n\t\t\t\t\t\t\t//console.log(\"color(d) : \" + color(d) + \" | d: \" + d + \" | i: \" + i); \r\n\t\t\t\t\t\t\tif (i>1) \r\n\t\t\t\t\t\t\t\tstrClass = color(d)\r\n\t\t\t\t\t\t\telse \r\n\t\t\t\t\t\t\t\tif ( i ==1 ) strClass = \"N\" + color(d)\r\n\t\t\t\t\t\t\t\telse strClass = \"day\"\r\n\t\t\t\t\t\t\treturn strClass ;});\r\n  legend.append(\"text\")\r\n      .attr(\"x\", 24-30)\r\n      .attr(\"y\", 9)\r\n      .attr(\"dy\", \".35em\")\r\n\t  .attr(\"text-anchor\", \"end\")\r\n      .text(function(d,i) { \r\n\t\t//console.log(d);\r\n\t\t//LScaleArr[i]\r\n\t\tvar strLbl = \"\"\r\n\t\tif (i>0) \r\n\t\t\t{ \r\n\t\t\t//console.log(arrayRange + \" | \" + i);\r\n\t\t\tif (i < (arrayRange-1)) \r\n\t\t\t\t{ //console.log(\"if\");\r\n\t\t\t\tstrLbl =  addCommas(LScaleArr[i]) + \" - \"+ addCommas(d);\r\n\t\t\t\t}\r\n\t\t\telse \r\n\t\t\t\t{\r\n\t\t\t\t\t//console.log(\"else\");\r\n\t\t\t\t\tstrLbl =  addCommas(LScaleArr[i]) + \" - \"+ addCommas(domainMax);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\telse \r\n\t\t\tstrLbl = \"Data not available\";\r\n\t\treturn strLbl;\r\n\t\t\t}\r\n\t\t)\r\n}\r\n// -- calendar building ends --//\r\n\r\n\r\n}\r\n\r\nfunction buildDataview (strDate, Ind) {\r\n\r\n//console.log(\"buildDataview\");\r\n//console.log(Ind);\r\nvar monthNames = [ \"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\",\r\n    \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\" ];\r\n\t\r\nvar d = strDate;\r\nif (d.getDate().toString().length == 1)  var curr_date = \"0\"+d.getDate();\r\nelse var curr_date = d.getDate();\r\n\r\nvar DCurrMonth = \"\";\r\nif (Ind == \"Display\") { \r\n\tDCurrMonth = monthNames[d.getMonth()];\r\n}\r\nelse\r\n{\r\n\tif (d.getMonth().toString().length == 1) \r\n\t{\r\n\tvar curr_month = \"0\"+parseInt(d.getMonth()+1);\r\n\t}\t\r\n\telse \r\n\t{\r\n\t\tvar curr_month = d.getMonth()+1; //Months are zero based\r\n\t}\r\n}\r\n\r\n\t\r\nvar curr_year = d.getFullYear();\r\nvar strDateX = \"\";\r\nselectedDate = curr_year + \"-\" + curr_month + \"-\" + curr_date;\r\n//console.log(selectedDate);\r\nif (Ind == \"Display\") { \r\n\t\tstrDateX  = DCurrMonth + \" \" + d.getDate() + \" \" + curr_year;\r\n\t}\r\nelse strDateX =  curr_year + \"-\" + curr_month + \"-\" + curr_date;\r\n//console.log(\"strDate\")\r\n//console.log(strDateX)\r\nreturn strDateX;\r\n}\r\n\r\nfunction buildDisplayDate (strDate) {\r\n\r\nvar monthNames = [ \"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\",\r\n    \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\" ];\r\nvar arrDate = strDate.split(\"-\");\r\n\r\nif (arrDate[1].substring(0,1) != \"0\") \r\n{\t\r\n\t//console.log(\"typeof(arrDate[1]): 2\");\r\n\t//console.log(typeof(arrDate[1]));\r\n\t//console.log(arrDate[1].substring(0,1) );\r\n\tvar currmonth = monthNames[Number(arrDate[1])-1];\r\n}\r\nelse \r\n{\r\n\t//console.log(\"typeof(arrDate[1]) : 1\");\r\n\t//console.log(typeof(arrDate[1]));\r\n\t//console.log(arrDate[1].substring(0,1) );\r\n\tvar currmonth = monthNames[Number(arrDate[1].substring(1,2))-1];\r\n}\r\nstrDateX  = currmonth + \" \" + arrDate[2] + \" \" + arrDate[0];\r\n\r\nreturn strDateX;\r\n}\r\n\r\nfunction buildSelectData (strDt, StrClass) {\r\n\tSelectedData = [];\r\n\t\r\n\tvar displayDt = buildDisplayDate(strDt);\r\n\t//if (origDt !=\"\") \r\n\td3.select(\"#currDate\").text(displayDt);\r\n\t//else d3.select(\"#currDate\").text(strDt);\r\n\t\r\n\ttry { document.getElementById(strDt).focus();\r\n\t}\r\n\tcatch(err)\r\n\t{}\r\n\t//console.log(\"StrClass\");\r\n\t//console.log(StrClass);\r\n\tvar strFile = \"\";\r\n\tvar strFileErr = \"\";\r\n\r\n\tvar errMsgs = [];\r\n\tvar fileLayout = [];\r\n\t\r\n\tBIGDATA.forEach(function (d) {\r\n\t\t\r\n\t\tif (strDt == d.Date) \r\n\t\t{\r\n\t\t\tif (typeof(d.File_Layouts) == \"string\") \r\n\t\t\t{ \r\n\t\t\tvar strFilString = d.File_Layouts;\r\n\t\t\tstrCurrFile = strFilString.split(\"|\");\r\n\t\t\tstrCurrFile.forEach (function(d) {\r\n\t\t\t\tif (strFile.indexOf(d) == -1 && (d !=\"\") ) strFile = strFile + d + \"|\";\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\tif (typeof(d.Error_Msgs) == \"string\") \r\n\t\t\t{ \r\n\t\t\tvar strErrString = d.Error_Msgs;\r\n\t\t\tstrCurrErr = strErrString.split(\"|\");\r\n\t\t\t\r\n\t\t\tfor (var i=0;i<strCurrErr.length;i++)\r\n\t\t\t\t{\r\n\t\t\t\tif (strFileErr.indexOf(strCurrErr[i]) == -1 && (i%2 == 0) ) \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tstrFileErr = strFileErr + strCurrErr[i] + \"|\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (typeof(strFileErr) == \"string\") {\r\n\t\t\t\tvar arrErr = strFileErr.split(\"|\");\r\n\t\t\t\tarrErr.forEach( function(d) {\r\n\t\t\t\tif (d != \"\") errMsgs.push(d);\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\tif (typeof(strFile) == \"string\") {\r\n\t\t\t\tvar arrFileLayout = strFile.split(\"|\");\r\n\t\t\t\tarrFileLayout.forEach( function(d) {\r\n\t\t\t\tif (d != \"\") fileLayout.push(d);\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\tvar datarow = {\r\n\t\t\t\t\t\t\"Date\" : d.Date,\r\n\t\t\t\t\t\t\"Tot_Records\" :  parseInt(d.Tot_Records),\r\n\t\t\t\t\t\t\"Tot_Inserts\" : parseInt(d.Tot_Inserts),\r\n\t\t\t\t\t\t\"Tot_Updates\" : parseInt(d.Tot_Updates),\r\n\t\t\t\t\t\t\"Tot_Failures\" : parseInt(d.Tot_Failures),\r\n\t\t\t\t\t\t\"Tot_Duration_Secs\" : Number(d.Tot_Duration_Secs),\r\n\t\t\t\t\t\t\"Tot_Duration_Hrs\" : Number(d.Tot_Duration_Hrs),\r\n\t\t\t\t\t\t\"File_Layouts\" : fileLayout.length,\r\n\t\t\t\t\t\t\"Error_Msgs\" : errMsgs.length,\r\n\t\t\t\t\t\t\"Files\" : fileLayout,\r\n\t\t\t\t\t\t\"Errors\" : errMsgs\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\tSelectedData.push(datarow);\r\n\t\t\t\r\n\t\t\t\r\n\t\t}\r\n\t})\r\n\t//console.log(\"SelectedData\");\r\n\t//console.log(SelectedData);\r\n\t//console.log(typeof(BIGDATA));\r\n\t//console.log(typeof(SelectedData));\r\n\tif (SelectedData.length > 0 ) \r\n\t{\r\n\t\tSelectedData.forEach (function (d) {\r\n\t\t\t\td3.select(\"#dtot\").text(function (x) { return addCommas(d.Tot_Records);});\r\n\t\t\t\td3.select(\"#derr\").text(function (x) { return addCommas(d.Tot_Failures);});\r\n\t\t\t\td3.select(\"#dupd\").text(function (x) { return addCommas(d.Tot_Updates);});\r\n\t\t\t\td3.select(\"#dnew\").text(function (x) { return addCommas(d.Tot_Inserts);});\r\n\t\t\t\td3.select(\"#ddurH\").text(function (x) { return addCommas(d.Tot_Duration_Hrs);});\r\n\t\t\t\td3.select(\"#dfile\").text(function (x) { return addCommas(d.File_Layouts);});\r\n\t\t\t\td3.select(\"#derrM\").text(function (x) { return addCommas(d.Error_Msgs);});\r\n\t\t\t});\r\n\t}\r\n\telse\r\n\t{\r\n\t\td3.select(\"#dtot\").text(\"NA\");\r\n\t\td3.select(\"#derr\").text(\"NA\");\r\n\t\td3.select(\"#dupd\").text(\"NA\");\r\n\t\td3.select(\"#dnew\").text(\"NA\");\r\n\t\td3.select(\"#ddurH\").text(\"NA\");\r\n\t\td3.select(\"#dfile\").text(\"NA\");\r\n\t\td3.select(\"#derrM\").text(\"NA\");\r\n\t\t\r\n\t}\r\n\t//d3.select(\"#dtot\").text( function(d) {SelectedData[0].Tot_Records;});\r\n}\r\nfunction buildSummaryData () {\r\n\t\r\n\tvar Summ_Recs = 0;\r\n\tvar Summ_Err = 0;\r\n\tvar Summ_Upd = 0;\r\n\tvar Summ_New = 0;\r\n\tvar Summ_Load_sec = 0.00;\r\n\tvar Summ_Load_hr = 0.00;\r\n\tvar Summ_days = 0;\r\n\tvar Summ_days_err = 0;\r\n\t\r\n\tvar strFile = \"\";\r\n\tvar strFileErr = \"\";\r\n\tSummaryData = [];\r\n\tvar errMsgs = [];\r\n\tvar fileLayout = [];\r\n\t\r\n\t//console.log(BIGDATA);\r\n\tBIGDATA.forEach(function (d) {\r\n\t\tif (! isNaN(d.Tot_Records)) Summ_Recs = Summ_Recs + parseInt(d.Tot_Records);\r\n\t\tif (! isNaN(d.Tot_Failures)) Summ_Err = Summ_Err + parseInt(d.Tot_Failures);\r\n\t\tif (! isNaN(d.Tot_Updates)) Summ_Upd = Summ_Upd + parseInt(d.Tot_Updates);\r\n\t\tif (! isNaN(d.Tot_Inserts)) Summ_New = Summ_New + parseInt(d.Tot_Inserts);\r\n\t\tif (! isNaN(d.Tot_Duration_Hrs)) Summ_Load_hr = Summ_Load_hr + d3.round(Number(d.Tot_Duration_Hrs),2);\r\n\t\tif (! isNaN(d.Tot_Duration_Secs)) Summ_Load_sec = Summ_Load_sec + d3.round(Number(d.Tot_Duration_Secs),2);\r\n\t\t\r\n\t\tSumm_days  = Summ_days +1;\r\n\t\tif (d.Tot_Failures > 0) Summ_days_err = Summ_days_err +1;\r\n\t\t\r\n\t\tif (typeof(d.File_Layouts) == \"string\") \r\n\t\t{ \r\n\t\t\tvar strFilString = d.File_Layouts;\r\n\t\t\tstrCurrFile = strFilString.split(\"|\");\r\n\t\t\tstrCurrFile.forEach (function(d) {\r\n\t\t\t\tif (strFile.indexOf(d) == -1 && (d !=\"\") ) strFile = strFile + d + \"|\";\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (typeof(d.Error_Msgs) == \"string\") \r\n\t\t{ \r\n\t\t\tvar strErrString = d.Error_Msgs;\r\n\t\t\tstrCurrErr = strErrString.split(\"|\");\r\n\t\t\t\r\n\t\t\tfor (var i=0;i<strCurrErr.length;i++)\r\n\t\t\t{\r\n\t\t\t\tif (strFileErr.indexOf(strCurrErr[i]) == -1 && (i%2 == 0) ) \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tstrFileErr = strFileErr + strCurrErr[i] + \"|\";\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\tif (typeof(strFileErr) == \"string\") {\r\n\t\tvar arrErr = strFileErr.split(\"|\");\r\n\t\tarrErr.forEach( function(d) {\r\n\t\t\t\tif (d != \"\") errMsgs.push(d);\r\n\t\t\t})\r\n\t}\r\n\tif (typeof(strFile) == \"string\") {\r\n\t\tvar arrFileLayout = strFile.split(\"|\");\r\n\t\tarrFileLayout.forEach( function(d) {\r\n\t\t\t\tif (d != \"\") fileLayout.push(d);\r\n\t\t\t})\r\n\t}\r\n\r\n\tvar datarow = {\r\n\t\t\t\t\t\t\"Tot_Records\" :  Summ_Recs,\r\n\t\t\t\t\t\t\"Tot_Inserts\" : Summ_New,\r\n\t\t\t\t\t\t\"Tot_Updates\" : Summ_Upd,\r\n\t\t\t\t\t\t\"Tot_Failures\" : Summ_Err,\r\n\t\t\t\t\t\t\"Tot_Duration_Secs\" : d3.round(Summ_Load_sec,2),\r\n\t\t\t\t\t\t\"Tot_Duration_Hrs\" : d3.round(Summ_Load_hr,2),\r\n\t\t\t\t\t\t\"File_Layouts\" : fileLayout.length,\r\n\t\t\t\t\t\t\"Error_Msgs\" : errMsgs.length,\r\n\t\t\t\t\t\t\"Tot_days\" : Summ_days,\r\n\t\t\t\t\t\t\"Tot_Err_days\" :Summ_days_err,\r\n\t\t\t\t\t\t\"Files\" : fileLayout,\r\n\t\t\t\t\t\t\"Errors\" : errMsgs\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\tSummaryData.push(datarow);\r\n\t//console.log(SummaryData);\r\n\tif (SummaryData.length > 0 ) \r\n\t{\r\n\t\tSummaryData.forEach (function (d) {\r\n\t\t\t\td3.select(\"#Sdtot\").text(function (x) { return addCommas(d.Tot_Records);});\r\n\t\t\t\td3.select(\"#Sderr\").text(function (x) { return addCommas(d.Tot_Failures);});\r\n\t\t\t\td3.select(\"#Sdupd\").text(function (x) { return addCommas(d.Tot_Updates);});\r\n\t\t\t\td3.select(\"#Sdnew\").text(function (x) { return addCommas(d.Tot_Inserts);});\r\n\t\t\t\td3.select(\"#SddurH\").text(function (x) { return addCommas(d.Tot_Duration_Hrs);});\r\n\t\t\t\td3.select(\"#Sdfile\").text(function (x) { return addCommas(d.File_Layouts);});\r\n\t\t\t\td3.select(\"#SderrM\").text(function (x) { return addCommas(d.Error_Msgs);});\r\n\t\t\t\td3.select(\"#SderrDAYS\").text(function (x) { return addCommas(d.Tot_Err_days);});\r\n\t\t\t\td3.select(\"#SdDAYS\").text(function (x) { return addCommas(d.Tot_days);});\r\n\t\t\t});\r\n\t}\r\n\telse\r\n\t{\r\n\t\td3.select(\"#Sdtot\").text(\"\");\r\n\t\td3.select(\"#Sderr\").text(\"\");\r\n\t\td3.select(\"#Sdupd\").text(\"\");\r\n\t\td3.select(\"#Sdnew\").text(\"\");\r\n\t\td3.select(\"#SddurH\").text(\"\");\r\n\t\td3.select(\"#Sdfile\").text(\"\");\r\n\t\td3.select(\"#SderrM\").text(\"\");\r\n\t\td3.select(\"#SderrDAYS\").text(\"\");\r\n\t\td3.select(\"#SdDAYS\").text(\"\");\r\n\t\t\r\n\t}\r\n}\r\nfunction addCommas(nStr)\r\n{\r\n\tnStr += '';\r\n\tx = nStr.split('.');\r\n\tx1 = x[0];\r\n\tx2 = x.length > 1 ? '.' + x[1] : '';\r\n\tvar rgx = /(\\d+)(\\d{3})/;\r\n\twhile (rgx.test(x1)) {\r\n\t\tx1 = x1.replace(rgx, '$1' + ',' + '$2');\r\n\t}\r\n\treturn x1 + x2;\r\n}\r\nd3.select(self.frameElement).style(\"height\", \"2910px\");\r\n\r\n</script>","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}