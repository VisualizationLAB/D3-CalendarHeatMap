{"name":"D3-calendarheatmap","tagline":"Calendar Heat Map","body":"<!DOCTYPE html>\r\n<meta charset=\"utf-8\">\r\n<style>\r\n\r\nbody {\r\n  font: 10px sans-serif;\r\n  shape-rendering: crispEdges;\r\n}\r\n\r\n#DivlineChart1.lineChart.text {\r\n  color: red;\r\n  shape-rendering: crispEdges;\r\n}\r\n\r\n/*line graph*/\r\n\r\n.axis path,\r\n.axis line {\r\n  fill: none;\r\n  //stroke: #000;\r\n  stroke: rgba(51, 102, 153,.5);\r\n  shape-rendering: crispEdges;\r\n}\r\n\r\n.bar {\r\n  //fill: orange;\r\n  //fill: rgba(179,179,179,0.5);\r\n  //fill: rgba(51, 102, 153,.5)\r\n  //fill: aliceblue;\r\n  fill: rgba(0,0,255,0.9)\r\n}\r\n\r\n.bar:hover {\r\n  fill: orangered ;\r\n}\r\n\r\n.x.axis path {\r\n  display: none;\r\n}\r\n\r\n.d3-tip {\r\n  line-height: 1;\r\n  font-weight: bold;\r\n  padding: 12px;\r\n  background: rgba(0, 0, 0, 0.8);\r\n  color: #fff;\r\n  border-radius: 2px;\r\n}\r\n\r\n/* Creates a small triangle extender for the tooltip */\r\n.d3-tip:after {\r\n  box-sizing: border-box;\r\n  display: inline;\r\n  font-size: 10px;\r\n  width: 100%;\r\n  line-height: 1;\r\n  color: rgba(0, 0, 0, 0.8);\r\n  content: \"\\25BC\";\r\n  position: absolute;\r\n  text-align: center;\r\n}\r\n\r\n/* Style northward tooltips differently */\r\n.d3-tip.n:after {\r\n  margin: -1px 0 0 0;\r\n  top: 100%;\r\n  left: 0;\r\n}\r\n/*line graph END */\r\n\r\n.day {\r\n  //fill: #fff;\r\n  fill:rgba(179,179,179,0.2);\r\n  //stroke: #ccc;\r\n  outline-style:none;\r\n  stroke: #fff;\r\n  stroke-width: 1px;\r\n  outline-width:1px;\t\r\n  outline-style:none;\r\n\toutline-color:#fff;\r\n}\r\n\r\n.day.active {\r\n  outline-width:1px;\t\r\n  outline-style:solid;\r\n  outline-color:black;\r\n}\r\n\r\n.month {\r\n  fill: none;\r\n  //stroke: #000;\r\n  stroke: #fff;\r\n  stroke-width: 4px;\r\n  -webkit-font-smoothing: subpixel-antialiased;\r\n  font: 10px sans-serif;\r\n}\r\n.H1 {\r\n   font-size: 15px;\r\n   -webkit-font-smoothing: subpixel-antialiased;\r\n   padding: 10px;\r\n  // color: rgba(102, 102, 102,1); \r\n  color: rgba(51, 102, 153,.5);\r\n   TEXT-ALIGN: CENTER;\r\n    font-weight:bold;\r\n}\r\n#summ_row1 {\r\n  //color: rgba(153, 153, 153,.7);\r\n  //color: rgba(51, 102, 153,1);\r\n  color:rgba(179,179,179,1);\r\n  stroke: red;\r\n  font-size:10px;\r\n  -webkit-font-smoothing: subpixel-antialiased;\r\n  //font-weight:bold;\r\n}\r\n\r\n.Summ1{\r\n  //color: rgba(153, 153, 153,.7);\r\n  //color: rgba(51, 102, 153,1);\r\n  color:rgba(179,179,179,1);\r\n  stroke: red;\r\n  font-size:15px;\r\n  //font-weight:bold;\r\n}\r\n.label1.active {\r\n  font-size:15px;\r\n  -webkit-font-smoothing: subpixel-antialiased;\r\n //color:rgba(0,104,55,.3); \r\n color: rgba(51, 102, 153,1);\r\n}\r\n\r\n.sub_title{\r\n  //color: rgba(153, 153, 153,.7);\r\n  //color: rgba(51, 102, 153,1);\r\n  color: blue;\r\n  stroke: red;\r\n  -webkit-font-smoothing: subpixel-antialiased;\r\n  font-size:14px;\r\n  font-weight:bold;\r\n}\r\n.sub_titleL{\r\n  //color: rgba(153, 153, 153,.7);\r\n  color: rgba(179,179,179,0.7);\r\n  stroke: red;\r\n  -webkit-font-smoothing: subpixel-antialiased;\r\n  font-size:14px;\r\n  font-weight:bold;\r\n}\r\n#summ_row2 {\r\n  //color: rgba(51, 102, 153,.7);\r\n // color: rgba(51, 102, 153,1);\r\n //color:rgba(179,179,179,1);\r\n color:white;\r\n  stroke: red;\r\n  -webkit-font-smoothing: subpixel-antialiased;\r\n  font-size:40px;\r\n}\r\n.label2 {\r\n\tcolor:rgba(179,179,179,1);\r\n\tfont-size:25px;\r\n\t-webkit-font-smoothing: subpixel-antialiased;\r\n}\r\n.summ_row4 {\r\n  //color: rgba(51, 102, 153,.7);\r\n  color: rgba(51, 102, 153,1);\r\n  stroke: red;\r\n  font-size:20px;\r\n  -webkit-font-smoothing: subpixel-antialiased;\r\n}\r\n\r\n#summ_Line {\r\n\t//cellpadding: 10px;\r\n\tfont-size:20px;\r\n}\r\ntable.control_2:hover {\r\n  fill: red;\r\n}\r\n\r\n.control_1_2 { \r\ncell-padding: 10;\r\n}\r\n\r\n#currDate{\r\n  //color: rgba(51, 102, 153,.7);\r\n  color: rgba(51, 102, 153,1);\r\n  font-size:40px;\r\n  -webkit-font-smoothing: subpixel-antialiased;\r\n}\r\n\r\n.C4{\r\n   //height: 250px;\r\n   //border: 2px solid #F00;\r\n   border: none;\r\n   //width: 850px;\r\n    //padding: 3px;\r\n    overflow: auto;\r\n\r\n    /* POSITION */\r\n    position:fixed;\r\n}\r\n\r\n.rect.text {\r\nfont-size: 4px;\r\n}\r\n\r\n.q11-11{fill:rgba(0,104,55,1)}\r\n.qE11-11{fill:rgba(0,104,55,1)}\r\n\r\n.q11-11.active {outline-width:1px;\toutline-style:solid;outline-color:black;}\r\n.qE11-11.active {outline-width:1px;\toutline-style:solid;outline-color:black;}\r\n\r\n.q10-11{fill:rgba(0,104,55,1)}\r\n.q9-11{fill:rgba(0,104,55,.9)}\r\n.q8-11{fill:rgba(0,104,55,.8)}\r\n.q7-11{fill:rgba(0,104,55,.7)}\r\n.q6-11{fill:rgba(0,104,55,.6)}\r\n.q5-11{fill:rgba(0,104,55,.5)}\r\n\r\n.q4-11{fill:rgba(0,104,55,.4)}\r\n.q3-11{fill:rgba(0,104,55,.3)}\r\n.q2-11{fill:rgba(0,104,55,.2)}\r\n.q1-11{fill:rgba(0,104,55,.1)}\r\n.q0-11{fill:rgba(0,104,55,.075)}\r\n.Nq0-11{fill:rgba(255,255,0,.2)}\r\n\r\n\r\n.qE10-11{fill:rgba(165,0,38,1)}\r\n.qE9-11{fill:rgba(165,0,38,.9)}\r\n.qE8-11{fill:rgba(165,0,38,.8)}\r\n.qE7-11{fill:rgba(165,0,38,.7)}\r\n.qE6-11{fill:rgba(165,0,38,.6)}\r\n.qE5-11{fill:rgba(165,0,38,.5)}\r\n\r\n.qE4-11{fill:rgba(165,0,38,.4)}\r\n.qE3-11{fill:rgba(165,0,38,.3)}\r\n.qE2-11{fill:rgba(165,0,38,.2)}\r\n.qE1-11{fill:rgba(165,0,38,.1)}\r\n.qE0-11{fill:rgba(165,0,38,.075)}\r\n.NqE0-11{fill:rgba(0,104,55,.3)}\r\n\r\n.qE10-11.active {outline-width:1px;\toutline-style:solid;outline-color:black;}\r\n.qE9-11.active {outline-width:1px;\toutline-style:solid;outline-color:black;}\r\n.qE8-11.active {outline-width:1px;\toutline-style:solid;outline-color:black;}\r\n.qE7-11.active {outline-width:1px;\toutline-style:solid;outline-color:black;}\r\n.qE6-11.active {outline-width:1px;\toutline-style:solid;outline-color:black;}\r\n.qE5-11.active {outline-width:1px;\toutline-style:solid;outline-color:black;}\r\n.qE4-11.active {outline-width:1px;\toutline-style:solid;outline-color:black;}\r\n.qE3-11.active {outline-width:1px;\toutline-style:solid;outline-color:black;}\r\n.qE2-11.active {outline-width:1px;\toutline-style:solid;outline-color:black;}\r\n.qE1-11.active {outline-width:1px;\toutline-style:solid;outline-color:black;}\r\n.qE0-11.active {outline-width:1px;\toutline-style:solid;outline-color:black;}\r\n.NqE0-11.active {outline-width:1px;\toutline-style:solid;outline-color:black;}\r\n\r\n.q10-11.active {outline-width:1px;\toutline-style:solid;outline-color:black;}\r\n.q9-11.active {outline-width:1px;\toutline-style:solid;outline-color:black;}\r\n.q8-11.active {outline-width:1px;\toutline-style:solid;outline-color:black;}\r\n.q7-11.active {outline-width:1px;\toutline-style:solid;outline-color:black;}\r\n.q6-11.active {outline-width:1px;\toutline-style:solid;outline-color:black;}\r\n.q5-11.active {outline-width:1px;\toutline-style:solid;outline-color:black;}\r\n.q4-11.active {outline-width:1px;\toutline-style:solid;outline-color:black;}\r\n.q3-11.active {outline-width:1px;\toutline-style:solid;outline-color:black;}\r\n.q2-11.active {outline-width:1px;\toutline-style:solid;outline-color:black;}\r\n.q1-11.active {outline-width:1px;\toutline-style:solid;outline-color:black;}\r\n.q0-11.active {outline-width:1px;\toutline-style:solid;outline-color:black;}\r\n.Nq0-11.active {outline-width:1px;\toutline-style:solid;outline-color:black;}\r\n\r\n</style>\r\n<body>\r\n<script src=\"http://d3js.org/d3.v3.min.js\"></script>\r\n<script src=\"http://d3js.org/queue.v1.min.js\"></script>\r\n<script src=\"http://labratrevenge.com/d3-tip/javascripts/d3.tip.min.js\"></script>\r\n<!--link rel=\"stylesheet\" href=\"http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css\" /-->\r\n<!--script src=\"http://code.jquery.com/jquery-1.8.2.js\"></script-->\r\n<!--script src=\"http://code.jquery.com/ui/1.9.0/jquery-ui.js\"></script-->\r\n<!--link rel=\"stylesheet\" href=\"style.css\" /-->\r\n<script>\r\n\r\nvar width = screen.availWidth * 0.8,\r\n\theight = screen.availHeight * .2,\r\n   cellSize = width * 0.013; // cell size\r\n\r\nvar widthLine = screen.availWidth * .5 ,\r\nheightLine = height,\r\n//widthbar = screen.availWidth * 0.001953;\r\nwidthbar = screen.availWidth * 0.001954;\r\n\r\nvar heightC4 = cellSize * 14,\r\nwidthC4 = cellSize * 60;\r\n\r\nvar widthCalendar = cellSize * 58;\r\nvar heightCalendar = cellSize * 10;\r\n//var verticalCalendarOffset = heightCalendar * .1;\r\nif (screen.availWidth > 1280) { \r\nconsole.log(\"here\");\r\n\tvar verticalCalendarOffset = 20;\r\n}\r\nelse \r\n{\r\n\tconsole.log(\"here2\");\r\n\tvar verticalCalendarOffset = 70;\r\n}\r\nconsole.log(screen.availWidth);\r\nconsole.log(screen.availHeight);\r\n\r\nvar horizontalCalendarOffset = widthCalendar * .1;\r\nvar calendarStart = 2013;\r\nvar calendarEnd = 2014;\r\n\r\nvar cellpadding = 2;\r\nvar cellpaddingD = 0;\r\n\r\nvar borderT = 0;\r\nvar borderT2 = 0;\r\n\r\nvar widthBarChart = cellSize * 10;\r\n\r\nvar dataOriginal;\r\nvar arrayRange = 12;\r\nvar domainMax = 20000000;\r\nvar domainMin = 0;\r\n\r\n\r\n\r\n//Controls\r\nvar select_1 = \"err\";\r\nvar strSelectID = \"FAILED RECORDS\";\r\nvar select_Class = \"\";\r\nvar BIGDATA = [];\r\nvar dataBIG = [];\r\nvar DateArr = [];\r\nvar DateArrCumm = [];\r\nvar lineData = [];\r\nvar selectedDate = \"\"\r\nvar selectedDateLast = \"\"\r\nvar lastClicked;\r\nvar lastSelectedLabel;\r\n\r\nvar allDays = [];\r\n//var lastClicked;\r\n\r\nvar SummaryData = [];\r\nvar SelectedData = [];\r\n\r\nvar day = d3.time.format(\"%w\"),\r\n    week = d3.time.format(\"%U\"),\r\n    percent = d3.format(\".1%\"),\r\n    format = d3.time.format(\"%Y-%m-%d\");\r\n\t//format2 = d3.time.format(\"%a-%b-%e-%d\");\r\n\r\n\r\n\r\nvar mainTable = d3.select(\"body\")\r\n\t\t.attr(\"onload\", \"loadData()\")\r\n\t\t.append(\"table\")\r\n\t\t.attr(\"class\" , \"main\")\r\n\t\t.attr(\"id\" , \"main\")\r\n\t\t.attr(\"border\", borderT)\r\n\t\t.attr(\"cellpadding\", cellpadding)\r\n\t\t.attr(\"width\", \"100%\")\r\n\t\t.attr(\"height\", \"100%\");\r\n\t\t\r\nmainTable.append(\"tr\")\r\n\t.attr(\"class\" , \"H1\")\r\n\t.append(\"td\")\r\n\t.attr(\"align\", \"center\")\r\n\t.attr(\"colspan\", 3)\r\n\t.text( function(d) {return \"JIVA DATA LOAD REPORT ANALYTICS\" });\r\n\r\nmainTable.append(\"tr\")\r\n\t.attr(\"class\", \"details\")\r\n\t.append(\"td\")\r\n\t.attr(\"id\", \"currDate\")\r\n\t.attr(\"align\", \"center\")\r\n\t.attr(\"valign\", \"top\")\r\n\t.text( function(d) {\r\n\t\t//var format2 = d3.time.format(\"%a\");\r\n\t\t//var newStrdate = format2.parse(Date());\r\n\t\t//var newStrdate = Date().substring(0,15);\r\n\t\tvar d2 = new Date();\r\n\t\tnewStrdate = buildDataview (d2,\"\");\r\n\t\t//console.log(\"newStrdate\")\r\n\t\t//console.log(Date().substring(0,15))\r\n\t\t//console.log(newStrdate)\r\n\t\t\r\n\t\tselectedDate = newStrdate;\r\n\t\tnewStrdateX = buildDisplayDate(selectedDate);\r\n\t\treturn newStrdateX;\r\n\t\t});\r\n\t\r\nmainTable.append(\"tr\")\r\n\t.attr(\"class\", \"control_1\");\r\n\t\r\nmainTable.append(\"tr\")\r\n\t.append(\"td\")\r\n\t.attr(\"align\", \"center\")\r\n\t.attr(\"valign\", \"top\")\r\n\t//.text(\"THIS IS ME\")\r\n\t//.append(\"div\")\r\n\t//.attr(\"id\", \"DivlineChart1\"); // uncomment later\r\n\t\r\nmainTable.append(\"tr\")\r\n\t.append(\"td\")\r\n\t.attr(\"align\", \"center\")\r\n\t.append(\"table\")\r\n\t.attr(\"border\", borderT)\r\n\t//.attr(\"width\", \"100%\")\r\n\t.append(\"tr\")\r\n\t.attr(\"class\", \"detailsR\");\r\n\t//.append(\"td\");\r\n\t//.text( function(d) {return \"JIVA DATA LOAD REPORT ANALYTICS\" });\r\n\r\nd3.select(\".detailsR\").append(\"td\")\r\n\t.attr(\"class\",\"sub_titleL\")\r\n\t.attr(\"id\",\"sub_titleL\")\r\n\t.attr(\"align\", \"right\")\r\n\t.attr(\"valign\", \"bottom\")\r\n\t.text(\"CALENDAR HEAT MAP FOR\");\r\n\t\r\nd3.select(\".detailsR\").append(\"td\")\r\n\t.attr(\"class\",\"sub_title\")\r\n\t.attr(\"id\",\"sub_title\")\r\n\t.attr(\"align\", \"left\")\r\n\t.attr(\"valign\", \"bottom\")\r\n\t.text(strSelectID);\r\n\t\r\nmainTable.append(\"tr\")\r\n\t.append(\"td\")\r\n\t.attr(\"class\", \"legendCR\")\r\n\t.attr(\"valign\", \"bottom\");\r\n\r\n/*mainTable.append(\"tr\")\r\n\t.attr(\"class\", \"details\")\r\n\t.append(\"td\");\r\n\t//.text( function(d) {return \"JIVA DATA LOAD REPORT ANALYTICS\" });*/\r\n\r\nmainTable.append(\"tr\")\r\n\t.attr(\"class\", \"details\")\r\n\t.append(\"td\")\r\n\t.attr(\"align\", \"center\")\r\n\t.append(\"table\")\r\n\t.attr(\"border\", borderT)\r\n\t.attr(\"class\",\"detailsT\")\r\n\t.attr(\"width\", \"100%\");\r\n//// _________drawing the DETAILS SECTION__________________________//\r\n\r\n/*d3.select(\".detailsT\")\r\n\t.append(\"tr\")\r\n\t.attr(\"class\" , \"radioOptions\")\r\n\t.append(\"td\")\r\n\t.text(\"detail\")\r\n\t.append(\"input\")\r\n\t.attr(\"type\" , \"radio\")\r\n\t.attr(\"name\" , \"detail\")\r\n\t.attr(\"value\" , \"detail1\")\r\n\t;\r\n\t\r\nd3.select(\".radioOptions\")\r\n\t.append(\"td\")\r\n\t.text(\"chart\")\r\n\t.append(\"input\")\r\n\t.attr(\"type\" , \"radio\")\r\n\t.attr(\"name\" , \"chart\")\r\n\t.attr(\"value\" , \"chart1\");\r\n\r\nd3.select(\".radioOptions\")\r\n\t.append(\"td\")\r\n\t.text(\"line\")\r\n\t.append(\"input\")\r\n\t.attr(\"type\" , \"radio\")\r\n\t.attr(\"name\" , \"trend\")\r\n\t.attr(\"value\" , \"chart2\");*/\r\n\t\r\nd3.select(\".detailsT\")\r\n\t.append(\"tr\")\r\n\t.attr(\"class\", \"detailsRow\");\r\n\t\r\nd3.select(\".detailsRow\")\t\r\n\t.append(\"td\")\r\n\t.attr(\"valign\", \"top\")\r\n\t.attr(\"class\" , \"theatre\");\r\n\t\r\nd3.select(\".theatre\")\r\n  .append(\"div\")\r\n  .attr(\"class\" ,\"stage\")\r\n  .append(\"table\")\r\n  .attr(\"class\" ,\"stageT\")\r\n  .attr(\"border\" , borderT)\r\n  .attr(\"cellpadding\" , cellpaddingD);\r\n  \r\n d3.select(\".stageT\")\r\n\t.append(\"tr\")\r\n  .attr(\"class\" , \"dataFile_err\");\r\n  \r\nd3.select(\".dataFile_err\")\r\n  .append(\"td\")\r\n  .attr(\"width\" , (widthBarChart * .5))\r\n  .attr(\"class\", \"fileList\")\r\n  .attr(\"valign\", \"top\")\r\n  .attr(\"align\", \"right\")\r\n  .append(\"div\")\r\n.attr(\"class\" , \"fileListDiv\");;\r\n\r\n d3.select(\".dataFile_err\")\r\n\t.append(\"td\")\r\n\t.attr(\"width\" , (widthBarChart))\r\n    .attr(\"class\", \"fileData\")\r\n\t.attr(\"valign\", \"top\")\r\n\t.attr(\"align\", \"left\")\r\n\t.append(\"div\")\r\n\t.attr(\"class\" , \"fileDataDiv\");\r\n\t\r\n d3.select(\".dataFile_err\")\r\n\t.append(\"td\")\r\n\t.attr(\"align\", \"right\")\r\n\t.attr(\"valign\", \"top\")\r\n\t.attr(\"width\" ,widthLine)\r\n\t.append(\"div\")\r\n\t.attr(\"id\", \"DivlineChart1\");\r\n\t\r\nd3.select(\".dataFile_err\")\r\n\t.append(\"td\")\r\n\t.attr(\"width\" , (widthBarChart))\r\n    .attr(\"class\", \"errData\")\r\n\t.attr(\"valign\", \"top\")\r\n\t.attr(\"align\", \"right\")\r\n\t.append(\"div\")\r\n\t.attr(\"class\" , \"errDataDiv\");;\r\n\t\r\n\t\t\r\n//// _________drawing the DETAILS SECTION__________________________//\r\nmainTable.append(\"tr\")\r\n\t.attr(\"class\", \"control_2\");\r\n\r\n//--Summary Section row 1 --//\r\n\t\r\nd3.select(\".control_1\").append(\"td\")\r\n\t.attr(\"width\", \"100%\")\r\n\t.attr(\"align\", \"center\")\r\n\t.append(\"table\")\r\n\t.attr(\"class\", \"summary\")\r\n\t.attr(\"width\", \"100%\")\r\n\t.attr(\"border\", 0)\r\n\t.attr(\"cellpadding\", cellpadding)\r\n\t.append(\"tr\")\r\n\t.attr(\"class\",\"summ_row1\")\r\n\t.attr(\"id\",\"summ_row1\")\r\n\t.attr(\"align\",\"center\");\r\n\t/*.append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.text(\"DATE\")*/\r\n\t\r\n///--mouseover /out functions ----//\r\nfunction labelClick(obj, objid) {\r\n\r\ntry {d3.select(lastSelectedLabel).style(\"font-size\", \"11px\");} catch(err){}\r\nlastSelectedLabel = obj;\r\nvar dobjid = \"d\"+objid;\r\n//console.log(dobjid);\r\nvar container = document.getElementById(dobjid),\r\ninnerdiv = container.getElementsByClassName(\"label2\");\r\ninnerdiv.style(\"font-size\", \"40px\");\r\nd3.select(obj).style(\"font-size\", \"20px\");\r\n\r\n}\r\n\r\nfunction mouseOver(Ind) {\r\n\t\t\tselect_1 = Ind;\r\n\t\t\tvar newSelecteddate = selectedDate;\r\n\t\t\t//console.log(\"selectedDate -> \" + selectedDate + \"| newSelecteddate ->\" + newSelecteddate);\r\n\t\t\t//console.log(\"document.getElementById(select_1).value\");\r\n\t\t\t//console.log(document.getElementById(select_1).textContent);\r\n\t\t\t//document.getElementById(select_1).style(\"font-size\", \"10px\")\r\n\t\t\t\r\n\t\t\tvar textVal = document.getElementById(select_1).textContent;\r\n\t\t\tstrSelectID  = textVal;\r\n\t\t\td3.select(\"#sub_title\").text(textVal);\r\n\t\t\t\r\n\t\t\t//var d = new Date();\r\n\t\t\t//selectedDate = buildDataview (d, \"\");\r\n\t\t\t//buildSelectData(selectedDate, \"\");\r\n\t\t\t\r\n\t\t\t////console.log(\"selectedDateLastHERE:\" + selectedDateLast);\r\n\t\t\t\r\n\t\t\tdocument.getElementById(selectedDateLast).focus();\r\n\t\t\t\r\n\t\t\td3.selectAll(\"svg\").remove();\r\n\t\t\td3.selectAll(\".svgContainer\").remove();\r\n\t\t\t//console.log(select_1)\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tdrawCalender(select_1, \"1\");\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t//console.log(\"lastClicked:\"+lastClicked)\r\n\t\t\t//console.log(lastClicked)\r\n\t\t\t//console.log(typeof(lastClicked))\r\n\t\t\t//try { d3.select(lastClicked).style(\"outline-style\", \"none\"); }\r\n\t\t\t//catch(err){}\r\n\t\t\t\r\n\t\t\t//var container = document.getElementById(lastClicked.id),\r\n\t\t\t//innerDiv = document.getElementsByClassName(lastClicked.class);\r\n\r\n\t\t\t//innerDiv.click();\r\n\t\t\t//container.click();\r\n\t\t\t\r\n\t\t\t//d3.select(lastClicked).click();\r\n\t\t\t//d3.selectAll(\"rect\").classed(\"active\", false)\r\n\t\t\t//d3.select(lastClicked).classed(\"active\", true)\r\n\t\t\t\r\n\t\t\t//d3.select(lastClicked).style(\"outline-style\", \"dotted\");\r\n\t\t\t//d3.select(lastClicked).style(\"outline-color\", \"red\");\r\n\t\t\t\r\n}\r\n///--mouseover /out functions END----//\r\nd3.select(\".summ_row1\").append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.attr(\"class\", \"label1\")\r\n\t//.attr(\"id\",\"Sdupd\")\r\n\t//.text(\"TOTAL\")\r\n\r\nd3.select(\".summ_row1\").append(\"td\")\r\n\t.attr(\"align\", \"right\")\r\n\t.attr(\"class\", \"label1\")\r\n\t.text(\"DAYS\");\r\n\t\r\nd3.select(\".summ_row1\").append(\"td\")\r\n\t.attr(\"align\", \"right\")\r\n\t.attr(\"class\", \"label1\")\r\n\t.attr(\"id\", \"upd\")\r\n\t.text(\"UPDATED RECORDS\")\r\n\t.on(\"mouseover\", function(d) { d3.select(this).classed(\"active\", true); mouseOver (this.id); return;})\r\n\t.on(\"mouseout\", function(d) { d3.select(this).classed(\"active\", false); return;})\r\n\t//.on(\"click\", function(d) { labelClick (this, this.id); return;})\r\n\r\nd3.select(\".summ_row1\").append(\"td\")\r\n\t.attr(\"align\", \"right\")\r\n\t.attr(\"class\", \"label1\")\r\n\t.attr(\"id\", \"new\")\r\n\t.text(\"INSERTED RECORDS\")\r\n\t.on(\"mouseover\", function(d) { d3.select(this).classed(\"active\", true); mouseOver (this.id); return;})\r\n\t.on(\"mouseout\", function(d) { d3.select(this).classed(\"active\", false); mouseOver (this.id);return;})\r\n\t//.on(\"click\", function(d) { labelClick (this, this.id); return;})\r\n\t\r\nd3.select(\".summ_row1\").append(\"td\")\r\n\t.attr(\"align\", \"right\")\r\n\t.attr(\"class\", \"label1\")\r\n\t.attr(\"id\", \"tot\")\r\n\t.text(\"TOTAL LOADED RECORDS\")\r\n\t.on(\"mouseover\", function(d) { d3.select(this).classed(\"active\", true); mouseOver (this.id); return;})\r\n\t.on(\"mouseout\", function(d) { d3.select(this).classed(\"active\", false); return;})\r\n\t//.on(\"click\", function(d) { labelClick (this, this.id); return;})\r\n\t  \r\nd3.select(\".summ_row1\").append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.attr(\"class\", \"label1\")\r\n\t.attr(\"id\", \"err\")\r\n\t.text(\"FAILED RECORDS\")\r\n\t.attr(\"style\", \"color:rgba(165,0,38,.4);\")\r\n\t.on(\"mouseover\", function(d) { d3.select(this).classed(\"active\", true); mouseOver (this.id); return;})\r\n\t.on(\"mouseout\", function(d) { d3.select(this).classed(\"active\", false); return;})\r\n\t//.on(\"click\", function(d) { labelClick (this, this.id); return;})\r\n\t  \r\nd3.select(\".summ_row1\").append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.attr(\"id\", \"durH\")\r\n\t.attr(\"class\", \"label1\")\r\n\t.text(\"LOAD TIME (Hrs)\")\r\n\t.on(\"mouseover\", function(d) { d3.select(this).classed(\"active\", true); mouseOver (this.id); return;})\r\n\t.on(\"mouseout\", function(d) { d3.select(this).classed(\"active\", false); return;})\r\n\t//.on(\"click\", function(d) { labelClick (this, this.id); return;})\r\nd3.select(\".summ_row1\").append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.attr(\"class\", \"label1\")\r\n\t.attr(\"id\", \"fileT\")\r\n\t.text(\"FILE TYPES\")\r\n\t.on(\"mouseover\", function(d) { d3.select(this).classed(\"active\", true); mouseOver (this.id); return;})\r\n\t.on(\"mouseout\", function(d) { d3.select(this).classed(\"active\", false); return;})\r\n\t//.on(\"click\", function(d) { labelClick (this, this.id); return;})\r\n\r\nd3.select(\".summ_row1\").append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.attr(\"class\", \"label1\")\r\n\t.attr(\"id\", \"email\")\r\n\t.text(\"EMAILS\")\r\n\t.on(\"mouseover\", function(d) { d3.select(this).classed(\"active\", true); mouseOver (this.id); return;})\r\n\t.on(\"mouseout\", function(d) { d3.select(this).classed(\"active\", false); return;})\r\n\t\r\nd3.select(\".summ_row1\").append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.attr(\"class\", \"label1\")\r\n\t.attr(\"style\", \"color:rgba(165,0,38,.4);\")\r\n\t.attr(\"id\", \"errT\")\r\n\t.text(\"ERROR TYPES\")\r\n\t.on(\"mouseover\", function(d) { d3.select(this).classed(\"active\", true); mouseOver (this.id); return;})\r\n\t.on(\"mouseout\", function(d) { d3.select(this).classed(\"active\", false); return;})\r\n\t//.on(\"click\", function(d) { labelClick (this, this.id); return;})\r\n\r\nd3.select(\".summ_row1\").append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.attr(\"class\", \"label1\")\r\n\t.attr(\"style\", \"color:rgba(165,0,38,.4);\")\r\n\t.text(\"ERROR DAYS\");\r\n\t\r\n//--Summary Section row 2 --//\r\nd3.select(\".summary\").append(\"tr\")\r\n\t.attr(\"class\",\"summ_row3_1\")\r\n\t.attr(\"id\",\"summ_row3_1\")\r\n\t.attr(\"align\",\"center\");\r\n\t\r\nd3.select(\".summary\").append(\"tr\")\r\n\t.attr(\"class\",\"summ_row2\")\r\n\t.attr(\"id\",\"summ_row2\")\r\n\t.attr(\"align\",\"center\");\r\n\t/*.append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.text(\"NA\")*/\r\n\t\r\nd3.select(\"#summ_row2\").append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.attr(\"class\", \"label1\")\r\n\t\r\nd3.select(\"#summ_row2\").append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.attr(\"class\", \"label1\")\r\n\t\r\nd3.select(\"#summ_row2\").append(\"td\")\r\n\t.attr(\"align\", \"right\")\r\n\t.attr(\"id\",\"dupd\")\r\n\t.attr(\"class\", \"label2\")\r\n\t.attr(\"style\", \"color:white;\")\r\n\t//.attr(\"style\",\"font-size:20px;color:rgba(179,179,179,1);\")\r\n\t.text(\"00,000,000\");\r\n\t\r\nd3.select(\"#summ_row2\").append(\"td\")\r\n\t.attr(\"align\", \"right\")\r\n\t.attr(\"class\", \"label2\")\r\n\t.attr(\"id\",\"dnew\")\r\n\t.attr(\"style\", \"color:white;\")\r\n\t//.attr(\"style\",\"font-size:20px;color:rgba(179,179,179,1);\")\r\n\t.text(\"00,000,000\");\r\n\t\r\nd3.select(\"#summ_row2\").append(\"td\")\r\n\t.attr(\"align\", \"right\t\")\r\n\t.attr(\"class\", \"label2\")\r\n\t.attr(\"id\",\"dtot\")\r\n\t.attr(\"style\", \"color:white;\")\r\n\t//.attr(\"style\",\"font-size:20px;color:rgba(179,179,179,1);\")\r\n\t.text(\"00,000,000\");\r\nd3.select(\"#summ_row2\").append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.attr(\"class\", \"label2\")\r\n\t.attr(\"id\",\"derr\")\r\n\t//.attr(\"style\",\"color:rgba(179,179,179,1);\")\r\n\t.attr(\"style\", \"color:white;\")\r\n\t.text(\"00,000,000\");\r\n\t//.attr(\"style\",\"font-size:20px;color:rgba(179,179,179,1); color:rgba(165,0,38,.4)\");\r\n\r\nd3.select(\"#summ_row2\").append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.attr(\"class\", \"label2\")\r\n\t.attr(\"id\",\"ddurH\")\r\n\t.attr(\"style\", \"color:white;\")\r\n\t//.attr(\"style\",\"font-size:20px;color:rgba(179,179,179,1);\")\r\n\t.text(\"00.00\");\r\n\r\nd3.select(\"#summ_row2\").append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.attr(\"class\", \"label2\")\r\n\t.attr(\"id\",\"dfile\")\r\n\t.attr(\"style\", \"color:white;\")\r\n\t//.attr(\"style\",\"font-size:20px;color:rgba(179,179,179,1);\")\r\n\t.text(\"00\")\r\n\t\r\nd3.select(\"#summ_row2\").append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.attr(\"class\", \"label2\")\r\n\t.attr(\"id\",\"demail\")\r\n\t.attr(\"style\", \"color:white;\")\r\n\t.text(\"00\");\r\n\t\r\nd3.select(\"#summ_row2\").append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.attr(\"class\", \"label2\")\r\n\t.attr(\"id\",\"derrM\")\r\n\t//.attr(\"style\",\"font-size:20px;color:rgba(179,179,179,1); color:rgba(165,0,38,.4)\")\r\n\t//.attr(\"style\",\"color:rgba(179,179,179,1);\")\r\n\t.attr(\"style\", \"color:white;\")\r\n\t.text(\"00\")\r\n\t//.style(\"font-size\" ,\"20px\");\r\n//--SUMARY - WHITE LINE --//\r\n/*d3.select(\".summary\").append(\"tr\")\r\n\t.attr(\"class\",\"summ_Line\")\r\n\t.attr(\"id\",\"summ_Line\")\r\n\t.attr(\"align\",\"center\")\r\n\t.append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.text(\"SUMMARY\")*/\r\n// - appending\r\n\r\nd3.select(\".summ_row3_1\").append(\"td\")\r\n\t.attr(\"align\", \"right\")\r\n\t.attr(\"class\", \"Summ1\")\r\n\t.text(\"total\")\r\n\t\r\nd3.select(\".summ_row3_1\").append(\"td\")\r\n\t.attr(\"align\", \"right\")\r\n\t.attr(\"class\", \"Summ1\")\r\n\t.attr(\"id\",\"SdDAYS\")\r\n\t.text(\"NA\")\r\n\r\n\t\r\nd3.select(\".summ_row3_1\").append(\"td\")\r\n\t.attr(\"align\", \"right\")\r\n\t.attr(\"class\", \"Summ1\")\r\n\t.attr(\"id\",\"Sdupd\")\r\n\t.text(\"NA\")\r\nd3.select(\".summ_row3_1\").append(\"td\")\r\n\t.attr(\"align\", \"right\")\r\n\t.attr(\"class\", \"Summ1\")\r\n\t.attr(\"id\",\"Sdnew\")\r\n\t.text(\"NA\")\r\nd3.select(\".summ_row3_1\").append(\"td\")\r\n\t.attr(\"align\", \"right\")\r\n\t.attr(\"class\", \"Summ1\")\r\n\t.attr(\"id\",\"Sdtot\")\r\n\t.text(\"NA\")\r\nd3.select(\".summ_row3_1\").append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.attr(\"id\",\"Sderr\")\r\n\t.attr(\"class\", \"Summ1\")\r\n\t.attr(\"style\", \"color:rgba(165,0,38,.4);\")\r\n\t.text(\"NA\")\r\nd3.select(\".summ_row3_1\").append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.attr(\"class\", \"Summ1\")\r\n\t.attr(\"id\",\"SddurH\")\r\n\t.text(\"NA\")\r\nd3.select(\".summ_row3_1\").append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.attr(\"class\", \"Summ1\")\r\n\t.attr(\"id\",\"Sdfile\")\r\n\t.text(\"NA\")\r\nd3.select(\".summ_row3_1\").append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.attr(\"class\", \"Summ1\")\r\n\t.attr(\"id\",\"Sdemail\")\r\n\t.text(\"NA\");\r\nd3.select(\".summ_row3_1\").append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.attr(\"class\", \"Summ1\")\r\n\t.attr(\"style\", \"color:rgba(165,0,38,.4);\")\r\n\t.attr(\"id\",\"SderrM\")\r\n\t.text(\"NA\")\r\n\r\nd3.select(\".summ_row3_1\").append(\"td\")\r\n\t.attr(\"align\", \"left\")\r\n\t.attr(\"id\",\"SderrDAYS\")\r\n\t.attr(\"class\", \"Summ1\")\r\n\t.attr(\"style\", \"color:rgba(165,0,38,.4);\")\r\n\t.text(\"NA\")\r\n//--Summary Section row 2 --//\r\n\r\n\t\r\n//--Summary Section END --//\t\r\n\t\r\nd3.select(\".row2\")\r\n\t.append(\"td\")\r\n\t.attr(\"width\", 500)\r\n\t.attr(\"id\", \"year\")\r\n\t.attr(\"align\", \"left\")\r\n\t.append(\"div\")\r\n\t.attr(\"id\", \"slider-range\")\r\n\t.attr(\"style\", \"display:none;\")\r\n\t.on( \"click\", function(d) { \r\n\t\t//console.log(this.value)\r\n\t\t});\r\n\r\n\r\n\t\r\n// ++++++++ Calendar section\r\nd3.select(\".legendCR\")\r\n\t.append(\"table\")\r\n\t.attr(\"cellpadding\", cellpaddingD)\r\n\t.attr(\"border\", borderT2)\r\n\t.append(\"tr\")\r\n\t.attr(\"class\", \"C3\");\r\n\r\n/*d3.select(\".C3\")\r\n\t.append(\"td\")\r\n\t//.attr(\"class\", \"C4\")\r\n\t.attr(\"valign\" , \"top\")\r\n\t.style(\"color\" , \"white\")\r\n\t.text(\"I m a little tea pot\");\r\nd3.select(\".C3\")\r\n\t.append(\"td\")\r\n\t//.attr(\"class\", \"C4\")\r\n\t.attr(\"valign\" , \"top\")\r\n\t.style(\"color\" , \"white\")\r\n\t.text(\"I m a little tea pot\");*/\r\n\t\r\nd3.select(\".C3\")\t\r\n\t.append(\"td\")\r\n\t.attr(\"class\", \"legendC\")\r\n\t.attr(\"align\", \"center\")\r\n\t.attr(\"valign\", \"bottom\");\r\n\t//.attr(\"width\", \"100%\");\r\n\t\r\n\t\r\n\t\r\nd3.select(\".C3\")\r\n\t.append(\"td\")\r\n\t.attr(\"align\" , \"left\")\r\n\t.attr(\"valign\" , \"bottom\")\r\n\t.attr(\"class\", \"C4\")\r\n\t.attr(\"width\", widthC4)\r\n\t.attr(\"height\", heightC4)\r\n\t//.attr(\"height\", 50)\r\n\t//.attr(\"valign\" , \"top\")\r\n\t//.text(\"I m a little tea pot I m a little tea pot I m a little tea pot\");\r\n\t\r\n\r\n// ++++++++ Calendar section END\r\n\r\n/*$(function() {\r\n    $( \"#slider-range\" ).slider({\r\n    range: true,\r\n    min: 0,\r\n\tmax: 1000,\r\n\tvalues: [2012,2013],\r\n    slide: function( event, ui ) {\r\n    var maxv = d3.min([ui.values[1], 10]);\r\n    var minv = d3.max([ui.values[0], 0]);\r\n    }});\r\n    });\r\n*/\r\nfunction loadData () {\r\n\r\n queue()\r\n\t.defer(d3.csv, \"Calendar.csv\")\r\n\t.await(ready);\r\n}\r\nvar arrDates = [];\r\nvar arrFail = [];\r\nvar arrVol = [];\r\nvar arrNew = [];\r\nvar arrUpd = [];\r\nvar arrDurHrs = [];\r\nvar arrFileLayout = [];\r\nvar arrFileT = [];\r\nvar arrErrMsgs = [];\r\nvar arrErrT = [];\r\n\r\nvar arrUniqueEmails = [];\r\nvar arrEmails = [];\r\n\r\nvar objData = [];\r\n\r\nfunction ready(error, dataCsv) {\r\nconsole.log(\"dataCsv\");\r\nconsole.log(dataCsv);\t\r\ndataOriginal = dataCsv;\r\n\r\ndataOriginal.forEach(function(d){ \r\n\t\t//console.log(d.Date);\r\n\t\tarrDates.push(d.Date);\r\n\t\tarrFail.push(parseInt(d.Tot_Failures));\r\n\t\tarrVol.push(parseInt(d.Tot_Records));\r\n\t\tarrNew.push(parseInt(d.Tot_Inserts));\r\n\t\tarrUpd.push(parseInt(d.Tot_Updates));\r\n\t\tarrDurHrs.push(d3.round(Number(d.Tot_Duration_Hrs),2));\r\n\t\tarrFileLayout.push(d.File_Layouts);\r\n\t\tarrErrMsgs.push(d.Error_Msgs);\r\n\t\tarrUpd.push(parseInt(d.Tot_Updates));\r\n\t\tarrEmails.push(parseInt(d.tot_emails));\r\n\t\tarrUniqueEmails.push(parseInt(d.tot_unique_emails));\r\n\t\t\r\n\t\t//console.log(d.File_Layouts);\r\n\t\tif (d.File_Layouts != \"\" && typeof(d.File_Layouts) != \"undefined\" ) {\r\n\t\t\tvar strFilString = d.File_Layouts;\r\n\t\t\tvar strFile = \"\";\r\n\t\t\tstrCurrFile = strFilString.split(\"|\");\r\n\t\t\tstrCurrFile.forEach (function(d) {\r\n\t\t\t\tif (strFile.indexOf(d) == -1 && (d !=\"\") ) strFile = strFile + d + \"|\";});\r\n\t\t\tvar newArr = strFile.split(\"|\");\r\n\t\t\tvar FileCnt = parseInt(newArr.length-1);\r\n\t\t}\r\n\t\telse var FileCnt = 0;\r\n\t\t\r\n\t\tarrFileT.push(parseInt(FileCnt));\r\n\t\r\n\t\tif (d.Error_Msgs != \"\" && typeof(d.Error_Msgs) != \"undefined\" ) {\r\n\t\t\tvar strCurrErr = d.Error_Msgs.split(\"|\");\r\n\t\t\tvar strFileErr = \"\";\r\n\t\t\tfor (var i=0;i<strCurrErr.length;i++)\r\n\t\t\t\t{\r\n\t\t\t\tif (strFileErr.indexOf(strCurrErr[i]) == -1 && (i%2 == 0) ) \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tstrFileErr = strFileErr + strCurrErr[i] + \"|\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\tvar newArr = strFileErr.split(\"|\");\r\n\t\t\tvar ErrCnt = parseInt(newArr.length-1);\r\n\t\t}\r\n\t\telse var ErrCnt = 0;\r\n\t\t\r\n\t\tarrErrT.push(parseInt(ErrCnt));\r\n\t\t\r\n\t\tvar datarow = {\r\n\t\t\t\t\t\t\"Date\" : d.Date,\r\n\t\t\t\t\t\t\"Tot_Records\" :  parseInt(d.Tot_Records),\r\n\t\t\t\t\t\t\"Tot_Inserts\" : parseInt(d.Tot_Inserts),\r\n\t\t\t\t\t\t\"Tot_Updates\" : parseInt(d.Tot_Updates),\r\n\t\t\t\t\t\t\"Tot_Failures\" : parseInt(d.Tot_Failures),\r\n\t\t\t\t\t\t\"Tot_Duration_Secs\" : d3.round(Number(d.Tot_Duration_Secs),2),\r\n\t\t\t\t\t\t\"Tot_Duration_Hrs\" : d3.round(Number(d.Tot_Duration_Hrs),2),\r\n\t\t\t\t\t\t\"File_Layouts\" : d.File_Layouts,\r\n\t\t\t\t\t\t\"Error_Msgs\" : d.Error_Msgs,\r\n\t\t\t\t\t\t\"File_Cnt\" : parseInt(FileCnt),\r\n\t\t\t\t\t\t\"Err_Cnt\" : parseInt(ErrCnt),\r\n\t\t\t\t\t\t\"tot_emails\" : parseInt(d.tot_emails),\r\n\t\t\t\t\t\t\"tot_unique_emails\" : parseInt(d.tot_unique_emails)\r\n\t\t\t\t\t\t};\r\n\t\tBIGDATA.push(datarow);\r\n\t\t//console.log(\"d.Tot_Failures\");\r\n\t\t//console.log(d.Tot_Failures);\r\n\t\t//console.log(arrFail);\r\n\t\t})\r\nconsole.log(\"BIGDATA\");\r\nconsole.log(BIGDATA);\r\n//console.log(arrFileT);\r\n//console.log(arrErrT);\r\n\r\n\r\ndrawCalender(select_1, \"0\");\r\nbuildSummaryData ();\r\n//console.log(\"onload() : \" + selectedDate);\r\n\r\nvar d = new Date();\r\nselectedDate = buildDataview (d, \"\");\r\nvar selectedDateD = buildDisplayDate (selectedDate);\r\n//console.log(selectedDate)\r\nselectedDateLast = selectedDate;\r\ndocument.getElementById(selectedDate).focus();\r\nbuildSelectData(selectedDate, \"\", \"\");\r\n/*console.log(\"document.getElementById(selectedDate).class\")\r\nvar selectedClass = document.getElementById(selectedDate).className.baseVal;\r\nif (selectedClass == \"day\") \r\n\t{\r\n\tconsole.log(d3.select(selectedClass));\r\n\t//d3.select(selectedClass).style(\"stroke:red\");\r\n\t}*/\r\n}\r\n\r\n\r\n\t\r\n//console.log(\"OUTSIDE\")\r\n//console.log(BIGDATA);\r\n//console.log(dataOriginal);\t\r\n//console.log(arrFail);\r\n//console.log(arrVol);\t\r\n\r\nfunction getDomainMax(val) {\r\nswitch (val)\r\n{\r\ncase \"tot\":\r\n  domainMax = d3.max(arrVol)\r\n  break;\r\ncase \"err\":\r\n  domainMax = d3.max(arrFail)\r\n  break;\r\ncase \"new\":\r\n  domainMax = d3.max(arrNew)\r\n  break;\r\ncase \"upd\":\r\n  domainMax = d3.max(arrUpd)\r\n  break;\r\ncase \"durH\":\r\n  domainMax = d3.max(arrDurHrs)\r\n  break;\r\ncase \"fileT\":\r\n  domainMax = d3.max(arrFileT)\r\n  break;\r\n case \"errT\":\r\n  domainMax = d3.max(arrErrT)\r\n  break;\r\ncase \"email\":\r\n  domainMax = d3.max(arrUniqueEmails)\r\n  break;\r\n}\r\n//return domainMax;\r\n}\r\n\r\nfunction getData(val,opt1,opt2,opt3,opt4,opt5,opt6,opt7, opt8) {\r\nswitch (val)\r\n{\r\ncase \"tot\":\r\n  vData = opt1\r\n  break;\r\ncase \"err\":\r\n  vData = opt2\r\n  break;\r\ncase \"new\":\r\n  vData = opt3\r\n  break;\r\ncase \"upd\":\r\n  vData = opt4\r\n  break;\r\ncase \"durH\":\r\n  vData = opt5\r\n  break;\r\n case \"fileT\":\r\n  vData = opt6\r\n  break;\r\n case \"errT\":\r\n  vData = opt7\r\n  break;\r\n case \"email\":\r\n  vData = opt8\r\n  break;\r\n}\r\nreturn vData;\r\n}\r\n\r\n// -- calendar building starts --//\r\nfunction drawCalender(ind, caller) {\r\n\r\n////console.log(\"BIGDATA-drawCalender\");\r\n//console.log(BIGDATA);\r\nd3.selectAll(\"svgContainer\").remove();\r\nallDays = [];\r\nvar d = new Date();\r\n//buildDataview (d, \"\");\r\n//console.log(\"drawCalender\");\r\n//console.log(selectedDate);\r\ndataBIG = d3.nest()\r\n\t\t\t.key(function(d) { return d.Date; })\r\n\t\t\t.rollup(function(d) { //console.log(select_1); \r\n\t\t\t\t\t\t\t\t\t//console.log(\"HERERERERERRE\");\r\n\t\t\t\t\t\t\t\t\t//console.log(d);\r\n\t\t\t\t\t\t\t\t\t//console.log(d[0].File_Cnt);\r\n\t\t\t\t\t\t\t\t\tvar dataVal = getData(select_1,parseInt(d[0].Tot_Records),parseInt(d[0].Tot_Failures),parseInt(d[0].Tot_Inserts),parseInt(d[0].Tot_Updates),Number(d[0].Tot_Duration_Hrs),parseInt(d[0].File_Cnt),parseInt(d[0].Err_Cnt),parseInt(d[0].tot_unique_emails));\r\n\t\t\t\t\t\t\t\t\treturn dataVal;\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t.map(BIGDATA);\r\n//console.log(\"dataBIG-drawCalender\");\r\n//console.log(dataBIG);\t\t\t\r\n\r\ngetDomainMax(select_1,\"domainMax\");\r\n\r\n\t//console.log(\"domainMax\");\r\n\t//console.log(domainMax);\r\n\t//console.log(select_1);\r\n\t\r\nvar color = d3.scale.quantize()\r\n   .domain([domainMin,domainMax])\r\n    .range(d3.range(arrayRange-1).map(function(d) { \r\n\t\t\t\t\t\t\tvar strVal = \"\";\r\n\t\t\t\t\t\t\tif (select_1 == \"err\" || select_1 == \"durH\" ||  select_1 == \"errT\" ) \r\n\t\t\t\t\t\t\t{ \r\n\t\t\t\t\t\t\t\tstrVal = \"qE\" + d + \"-11\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse \r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tstrVal = \"q\" + d + \"-11\";\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t//console.log(strVal);\r\n\t\t\t\t\t\t\treturn strVal; \r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t));\r\n\r\n\r\n//console.log(color.domain());\r\nvar svg = d3.select(\".C4\").selectAll(\"svg\")\r\n\t.data(d3.range(calendarStart, calendarEnd))\r\n  .enter().append(\"tr\")\r\n  .attr(\"class\" , \"svgContainer\")\r\n  .append(\"td\")\r\n  .append(\"svg\")\r\n    .attr(\"width\", widthCalendar)\r\n    .attr(\"height\", heightCalendar)\r\n    .attr(\"class\", \"RdYlGn\")\r\n  .append(\"g\")\r\n    //.attr(\"transform\", \"translate(\" + ((width - cellSize * 53) / 2) + \",\" + (height - cellSize * 7 - 1) + \")\");\r\n\t.attr(\"transform\", \"translate(\" + ((width - cellSize * 60) / 2) + \",\" + (height - cellSize * 8 - 1) + \")\");\r\n\t//.attr(\"transform\", \"translate(\" + ((width - cellSize * 60) / 2) + \",\" + (height - 200) + \")\"); //reducing gap between calendars\r\n\r\nvar yYearLabel = cellSize * 3.5 - verticalCalendarOffset;\r\nvar xYearLabel = -6-horizontalCalendarOffset;\r\n\r\nsvg.append(\"text\")\r\n    .attr(\"transform\", \"translate(\" + xYearLabel + \",\" + yYearLabel + \")rotate(-90)\")\r\n    .style(\"text-anchor\", \"middle\")\r\n    .text(function(d) { return d; });\r\n\t\r\n\r\nvar rect = svg.selectAll(\".day\")\r\n    .data(function(d) { \r\n\t//var dayStr = d3.time.days(new Date(d, 0, 1), new Date(d + 1, 0, 1));\r\n\t//console.log(\"dayStr\");\r\n\t//console.log(dayStr);\r\n\t//var datarow = { day: dayStr , value: 0}\r\n\t//allDays.push(datarow);\r\n\treturn d3.time.days(new Date(d, 0, 1), new Date(d + 1, 0, 1)); \r\n\t\r\n\t})\r\n\t.enter()\r\n\t.append(\"rect\")\r\n    .attr(\"class\", \"day\")\r\n\t//.attr(\"id\", function(d) { return d;})\r\n    .attr(\"width\", cellSize)\r\n    .attr(\"height\", cellSize)\r\n\t.on(\"mouseover\", function(d) { \r\n\t\tselectedDateLast = d;\r\n\t\t//console.log(\"this.name\");\r\n\t\t//console.log(d);\r\n\t\t//console.log(d.name);\r\n\t\t//console.log(d);\r\n\t\td3.selectAll(\"rect\").classed(\"active\", false)\r\n\t\td3.select(this).classed(\"active\", true)\r\n\t\tvar ClassNameSelected = this.className.baseVal;\r\n\t\tif (ClassNameSelected == \"day\" || ClassNameSelected == \"day active\") ClassNameSelected = ClassNameSelected.replace(\" active\", \"\");\r\n\t\t//console.log(ClassNameSelected);\r\n\t\t\r\n\t\tvar objLegend = d3.select(\".legend\").selectAll(\".rect\")[0].parentNode;\r\n\t\tvar objLegend_g = objLegend.children;\r\n\t\t//console.log(objLegend_g); \r\n\t\tfor(var i =0; i < objLegend_g.length; i++ ) {\r\n\t\t\tif(objLegend_g[i].children[0].id == ClassNameSelected) {\r\n\t\t\t//console.log(objLegend_g[i].children[0].id)\r\n\t\t\tobjLegend_g[i].children[0].style.outline = \"solid\";\r\n\t\t\tobjLegend_g[i].children[0].style.outlineColor  = \"red\";\r\n\t\t\tobjLegend_g[i].children[0].style.outlineWidth = \"1px\";\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tbuildSelectData(d, \"day\", this.name);\r\n\t})\r\n\t//.attr(\"name\", function(d) { var dayStr = d3.time.format(\"%a, %b %d %Y\"); return dayStr(d); })\r\n    .attr(\"x\", function(d) { return week(d) * cellSize-horizontalCalendarOffset; })\r\n    .attr(\"y\", function(d) { return (day(d) * cellSize)-verticalCalendarOffset; })\r\n\t.on(\"mouseout\", function(d) {\r\n\t\t\r\n\t\tvar objLegend = d3.select(\".legend\").selectAll(\".rect\")[0].parentNode;\r\n\t\tvar objLegend_g = objLegend.children;\r\n\t\t//console.log(objLegend_g); \r\n\t\tfor(var i =0; i < objLegend_g.length; i++ ) {\r\n\t\t\tobjLegend_g[i].children[0].style.outline = \"\";\r\n\t\t\tobjLegend_g[i].children[0].style.outlineColor  = \"\";\r\n\t\t\tobjLegend_g[i].children[0].style.outlineWidth = \"\";\r\n\t\t}\r\n\t\r\n\t})\r\n\t.on(\"click\", function(){\r\n\t\tif (caller == \"0\") try { d3.select(lastClicked).style(\"outline-style\", \"none\"); } catch(err){}\r\n\t\t\r\n\t\t//console.log(\"lastClicked: BEFORE - \" + lastClicked)\r\n\t\t//console.log(lastClicked)\r\n\t\t//console.log(caller)\r\n\t\tif (caller == \"0\") lastClicked = this;\r\n\t\t\r\n\t\t//console.log(\"lastClicked: NOW - \" + lastClicked)\r\n\t\t//console.log(lastClicked)\r\n\t\td3.select(lastClicked).style(\"outline-style\", \"dotted\"); \r\n\t\td3.select(lastClicked).style(\"outline-color\", \"red\"); \r\n\t})\r\n\t.attr(\"id\", function(d) { var strDate = buildDataview(d, \"\"); \r\n\t\r\n\t\t//console.log(strDate);\r\n\t\tvar datarow = {day: strDate}\r\n\t\tallDays.push(datarow);\r\n\t\r\n\treturn strDate;})\r\n    .datum(format);\r\n\t\r\nrect.append(\"title\")\r\n   .text(function(d) { return d; });\r\n\r\nsvg.selectAll(\".month\")\r\n    .data(function(d) { return d3.time.months(new Date(d, 0, 1), new Date(d + 1, 0, 1)); })\r\n  .enter().append(\"path\")\r\n    .attr(\"class\", \"month\")\r\n    .attr(\"d\", monthPath);\r\n\r\n\t\r\n\tvar month_name = d3.time.format(\"%B\")\r\n\r\nsvg.selectAll(\"text.month\")\r\n    .data(function(d) { return d3.time.months(new Date(d, 0, 1), new Date(d + 1, 0, 1)); })\r\n  .enter().append(\"text\")\r\n    .attr(\"class\", \"monthTxt\")\r\n    .attr(\"x\", function(d) { return week(d) * cellSize+25-horizontalCalendarOffset; })\r\n\t.attr(\"y\", -4-verticalCalendarOffset)\r\n\t.attr(\"transform\", \"translate(0,0)\")\r\n    .attr(\"style\", \"text-anchor:left;\")\r\n    .text(month_name);\r\n\t\r\nvar ScaleArr = [\"NA\", \"0\" ];\r\nvar LScaleArr = [\"NA\",\"0\"];\r\nvar DataArr = [];\r\n\r\n\r\n\t\t\r\nrect.filter(function(d) { return d in dataBIG; })\r\n\t.attr(\"class\", function(d) { \r\n\t\t\t\t\t\t\tDataArr.push(dataBIG[d]);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (dataBIG[d] == 0) \r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t//console.log(\"day N\" + color(dataBIG[d]));\r\n\t\t\t\t\t\t\t\treturn \"day N\" + color(dataBIG[d]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse \r\n\t\t\t\t\t\t\t{\t\r\n\t\t\t\t\t\t\t//console.log(\"day \" + color(dataBIG[d]));\r\n\t\t\t\t\t\t\treturn \"day \" + color(dataBIG[d]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t})\r\n\t.on(\"mouseover\", function(d) { \r\n\t\tselectedDateLast = d;\r\n\t\t\r\n\t\td3.selectAll(\"rect\").classed(\"active\", false)\r\n\t\td3.select(this).classed(\"active\", true)\r\n\t\t\r\n\t\tif (dataBIG[d] == 0) \r\n\t\t\t{\r\n\t\t\t\t//console.log(\"day N\" + color(dataBIG[d]));\r\n\t\t\t\tvar strClass =  \"day N\" + color(dataBIG[d]);\r\n\t\t\t}\r\n\t\telse \r\n\t\t\t{\t\r\n\t\t\t\t//console.log(\"day \" + color(dataBIG[d]));\r\n\t\t\tvar strClass = \"day \" + color(dataBIG[d]);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\r\n\t\t//console.log(objBarChart_g_children); \r\n\t\t//console.log(objBarChart_g_children[2]); \t\r\n\t\t//console.log(d);\r\n\t\t//console.log(d3.select(\".RdYlGn\").selectAll(\".rect\")[0]); \r\n\tvar objBarChart = d3.select(\".lineChart\").selectAll(\".rect\")[0].parentNode;\r\n\tvar objBarChart_g = objBarChart.children;\r\n\tvar objBarChart_g_children = objBarChart_g[0].children;\r\n\r\n\t\tfor(var i =0; i < objBarChart_g_children.length; i++ ) {\r\n\t\t\tif (objBarChart_g_children[i].id == d) {\r\n\t\t\t\t//console.log(objBarChart_g_children[i].id);\r\n\t\t\t\t//console.log(objBarChart_g_children[i]);\r\n\t\t\t\t//console.log(objBarChart_g_children[i].style); \r\n\t\t\t\t//console.log(objBarChart_g_children[i].style.outline); \r\n\t\t\t\t//console.log(objBarChart_g_children[i].style.outlineColor);\r\n\t\t\t\t//console.log(objBarChart_g_children[i].style.outlineWidth);\r\n\t\t\t\tobjBarChart_g_children[i].style.fill = \"red\";\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t }\r\n\t\t\t}\r\n\t\t\r\n\t\tvar ClassNameSelected = this.className.baseVal;\r\n\t\t//console.log(ClassNameSelected);\r\n\t\tif (ClassNameSelected == \"day\" || ClassNameSelected == \"day active\") ClassNameSelected = ClassNameSelected.replace(\" active\", \"\");\r\n\t\telse {\r\n\t\t\tClassNameSelected = ClassNameSelected.replace(\"day \", \"\");\r\n\t\t\tClassNameSelected = ClassNameSelected.replace(\" active\", \"\"); }\r\n\t\t//console.log(\"ClassNameSelected\");\r\n\t\t//console.log(ClassNameSelected);\r\n\t\t//console.log(d3.select(\".RdYlGn\").selectAll(\".rect\")[0]); \r\n\t\tvar objLegend = d3.select(\".legend\").selectAll(\".rect\")[0].parentNode;\r\n\t\tvar objLegend_g = objLegend.children;\r\n\t\t//console.log(objLegend_g); \r\n\t\tfor(var i =0; i < objLegend_g.length; i++ ) {\r\n\t\t\tif(objLegend_g[i].children[0].id == ClassNameSelected) {\r\n\t\t\t//console.log(objLegend_g[i].children[0].id)\r\n\t\t\tobjLegend_g[i].children[0].style.outline = \"solid\";\r\n\t\t\tobjLegend_g[i].children[0].style.outlineColor  = \"red\";\r\n\t\t\tobjLegend_g[i].children[0].style.outlineWidth = \"1px\";\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tbuildSelectData (d,strClass, this.name);\r\n\t} )\r\n\t.on(\"mouseout\", function(d) {\r\n\t\tvar objBarChart = d3.select(\".lineChart\").selectAll(\".rect\")[0].parentNode;\r\n\t\tvar objBarChart_g = objBarChart.children;\r\n\t\tvar objBarChart_g_children = objBarChart_g[0].children;\r\n\t\tfor(var i =0; i < objBarChart_g_children.length; i++ ) {\r\n\t\t\tif (objBarChart_g_children[i].id == d) {\r\n\t\t\t\tobjBarChart_g_children[i].style.fill = \"rgba(0,0,255,0.9)\";\r\n\t\t\t }\r\n\t\t\t}\r\n\t\t\t\r\n\t\t//var ClassNameSelected = this.className.baseVal;\r\n\t\t//ClassNameSelected = ClassNameSelected.replace(\"day \", \"\");\r\n\t\t//ClassNameSelected = ClassNameSelected.replace(\" active\", \"\");\r\n\t\t//console.log(ClassNameSelected);\r\n\t\t\r\n\t\t//console.log(d3.select(\".RdYlGn\").selectAll(\".rect\")[0]); \r\n\t\tvar objLegend = d3.select(\".legend\").selectAll(\".rect\")[0].parentNode;\r\n\t\tvar objLegend_g = objLegend.children;\r\n\t\t//console.log(objLegend_g); \r\n\t\tfor(var i =0; i < objLegend_g.length; i++ ) {\r\n\t\t\t//if(objLegend_g[i].children[0].id == ClassNameSelected) {\r\n\t\t\t//console.log(objLegend_g[i].children[0].id)\r\n\t\t\tobjLegend_g[i].children[0].style.outline = \"\";\r\n\t\t\tobjLegend_g[i].children[0].style.outlineColor  = \"\";\r\n\t\t\tobjLegend_g[i].children[0].style.outlineWidth = \"\";\r\n\t\t\t//}\r\n\t\t}\r\n\t\t\r\n\t})\r\n\t.on(\"click\", function(){\t\r\n\t\tif (caller == \"0\") try { d3.select(lastClicked).style(\"outline-style\", \"none\"); } catch(err){}\r\n\t\t\r\n\t\t//console.log(\"lastClicked: BEFORE - \" + lastClicked)\r\n\t\t//console.log(lastClicked)\r\n\t\t\r\n\t\tif (caller == \"0\") lastClicked = this;\r\n\t\t//console.log(\"lastClicked: NOW - \" + lastClicked)\r\n\t\t//console.log(lastClicked)\r\n\t\td3.select(lastClicked).style(\"outline-style\", \"dotted\"); \r\n\t\td3.select(lastClicked).style(\"outline-color\", \"red\"); \r\n\t})\r\n\t.attr(\"id\", function(d) { return d;})\r\n\t.select(\"title\")\r\n\t.text(function(d) { \r\n\t\t\treturn d + \": \" + addCommas(dataBIG[d]); });\r\n\r\n\t\r\nvar increment  = (d3.max(DataArr) - d3.min(DataArr))/arrayRange;\r\nvar Lbound = d3.min(DataArr);\r\nfor (var i=1; i<(arrayRange+1); i++)\r\n{\r\n\tScaleArr.push(parseInt(Lbound + i* increment));\r\n\tLScaleArr.push(parseInt(Lbound + (i-1)* increment));\r\n\t//console.log(ScaleArr.length);\r\n}\r\nScaleArr[ScaleArr.length-1] = d3.max(DataArr);\r\n\r\nbuildLegend ();\t\t\t\t\r\nLineChartData();\r\n\r\n////++++++++++++++++++++++++++++++++++++++++\r\nfunction monthPath(t0) {\r\n  var t1 = new Date(t0.getFullYear(), t0.getMonth() + 1, 0),\r\n      d0 = +day(t0), w0 = +week(t0),\r\n      d1 = +day(t1), w1 = +week(t1);\r\n\t  //console.log(\"typeof(d0)\");\r\n\t  //console.log(typeof(d0 * cellSize));\r\n\t  //console.log(d0 * cellSize-verticalCalendarOffset);\r\n\r\n\t  var val1 = d0 * cellSize - verticalCalendarOffset;\r\n\t  var val2 = 7 * cellSize - verticalCalendarOffset;\r\n\t  var val3 = (d1 + 1) * cellSize - verticalCalendarOffset;\r\n\t  var val4 = 0 - verticalCalendarOffset;\r\n\t  \r\n\t  var xval1 = (w0 + 1) * cellSize - horizontalCalendarOffset;\r\n\t  var xval2 = w0 * cellSize - horizontalCalendarOffset;\r\n\t  var xval3 = w1 * cellSize  - horizontalCalendarOffset;\r\n\t  var xval4 = (w1 + 1) * cellSize - horizontalCalendarOffset;\r\n\t  var xval5 = (w0 + 1) * cellSize - horizontalCalendarOffset;\r\n\t  \r\n  return \"M\" + xval1 + \",\" + val1\r\n     + \"H\" + xval2 + \"V\" + val2\r\n      + \"H\" + xval3 + \"V\" + val3\r\n      + \"H\" + xval4 + \"V\" + val4\r\n      + \"H\" + xval5 + \"Z\";\r\n\t\r\n\t/*return \"M\" + (w0 + 1) * cellSize + \",\" + val1\r\n      + \"H\" + w0 * cellSize + \"V\" + val2\r\n      + \"H\" + w1 * cellSize + \"V\" + val3\r\n      + \"H\" + (w1 + 1) * cellSize + \"V\" + val4\r\n      + \"H\" + (w0 + 1) * cellSize + \"Z\";*/\r\n}\r\n\r\nfunction buildLegend () {\r\n\r\n//console.log(ScaleArr);\t\r\nvar legend = d3.select(\".legendC\")\r\n.append(\"svg\")\r\n      .attr(\"class\", \"legend\")\r\n\t  .attr(\"width\", widthBarChart)\r\n\t  //.attr(\"height\",heightCalendar)\r\n      .attr(\"height\", (cellSize * arrayRange) + 2 * cellSize )\r\n\t  .selectAll(\"g\")\r\n\t  .data(ScaleArr)\r\n    .enter().append(\"g\")\r\n      .attr(\"transform\", function(d, i) { return \"translate(120,\" + parseInt((i * 13) +3) +\")\"; });\r\n\t\t\t\t\t\t\r\nlegend.append(\"rect\")\r\n      .attr(\"width\", cellSize *.8 )\r\n      .attr(\"height\", cellSize *.8 )\r\n\t  .attr(\"class\" , function(d, i){ \r\n\t\t\t\t\t\t\tvar strClass = \"\"\r\n\t\t\t\t\t\t\t//console.log(\"color(d) : \" + color(d) + \" | d: \" + d + \" | i: \" + i); \r\n\t\t\t\t\t\t\tif (i>1) \r\n\t\t\t\t\t\t\t\tstrClass = color(d)\r\n\t\t\t\t\t\t\telse \r\n\t\t\t\t\t\t\t\tif ( i ==1 ) strClass = \"N\" + color(d)\r\n\t\t\t\t\t\t\t\telse strClass = \"day\"\r\n\t\t\t\t\t\t\treturn strClass ;})\r\n\t.attr(\"id\" , function(d, i){ \r\n\t\t\t\t\t\t\tvar strClass = \"\"\r\n\t\t\t\t\t\t\t//console.log(\"color(d) : \" + color(d) + \" | d: \" + d + \" | i: \" + i); \r\n\t\t\t\t\t\t\tif (i>1) \r\n\t\t\t\t\t\t\t\tstrClass = color(d)\r\n\t\t\t\t\t\t\telse \r\n\t\t\t\t\t\t\t\tif ( i ==1 ) strClass = \"N\" + color(d)\r\n\t\t\t\t\t\t\t\telse strClass = \"day\"\r\n\t\t\t\t\t\t\treturn strClass ;});\r\n  legend.append(\"text\")\r\n      .attr(\"x\", 24-30)\r\n      .attr(\"y\", 9)\r\n      .attr(\"dy\", \".35em\")\r\n\t  .attr(\"text-anchor\", \"end\")\r\n\t  .attr(\"style\" , \"font-size: 9px;\")\r\n      .text(function(d,i) { \r\n\t\t//console.log(d);\r\n\t\t//LScaleArr[i]\r\n\t\tvar strLbl = \"\"\r\n\t\tif (i>0) \r\n\t\t\t{ \r\n\t\t\t//console.log(arrayRange + \" | \" + i);\r\n\t\t\tif (i < (arrayRange+2)) \r\n\t\t\t\t{ //console.log(\"if\");\r\n\t\t\t\tstrLbl =  addCommas(LScaleArr[i]) + \" - \"+ addCommas(d);\r\n\t\t\t\t}\r\n\t\t\telse \r\n\t\t\t\t{\r\n\t\t\t\t\t//console.log(\"else\");\r\n\t\t\t\t\tstrLbl =  addCommas(LScaleArr[i]) + \" - \"+ addCommas(domainMax);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\telse \r\n\t\t\tstrLbl = \"Data not available\";\r\n\t\treturn strLbl;\r\n\t\t\t}\r\n\t\t)\r\n}\r\n// -- calendar building ends --//\r\n\r\n\r\n}\r\n\r\nfunction buildDataview (strDate, Ind) {\r\n\r\n//console.log(\"buildDataview\");\r\n//console.log(Ind);\r\nvar monthNames = [ \"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\",\r\n    \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\" ];\r\n\t\r\nvar d = strDate;\r\nif (d.getDate().toString().length == 1)  {\r\n\t\r\n\tvar curr_date = \"0\"+d.getDate();\r\n\t}\r\nelse var curr_date = d.getDate();\r\n\r\n//var getDayStr = d.getDay();\r\n\r\nvar DCurrMonth = \"\";\r\nvar DCurrMonthInt = d.getMonth()+1;\r\nif (Ind == \"Display\") { \r\n\tDCurrMonth = monthNames[d.getMonth()];\r\n}\r\nelse\r\n{\r\n\t\r\n\tif (DCurrMonthInt.toString().length == 1) \r\n\t{\r\n\t\t//console.log(\"HERER??\");\r\n\t\t//console.log(d.getMonth());\r\n\t\t//console.log(d);\r\n\t\t//console.log(strDate);\r\n\t\tvar curr_month = \"0\"+parseInt(d.getMonth()+1);\r\n\t}\t\r\n\telse \r\n\t{\r\n\t\tvar curr_month = d.getMonth()+1; //Months are zero based\r\n\t}\r\n}\r\n\r\n\r\nvar curr_year = d.getFullYear();\r\nvar strDateX = \"\";\r\nselectedDate = curr_year + \"-\" + curr_month + \"-\" + curr_date;\r\n//console.log(selectedDate);\r\nif (Ind == \"Display\") { \r\n\t\tstrDateX  = DCurrMonth + \" \" + d.getDate() + \" \" + curr_year;\r\n\t}\r\nelse strDateX =  curr_year + \"-\" + curr_month + \"-\" + curr_date;\r\n//console.log(\"strDate\")\r\n//console.log(strDateX)\r\nreturn strDateX;\r\n}\r\n\r\nfunction buildDisplayDate (strDate) {\r\n\r\nvar monthNames = [ \"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\",\r\n    \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\" ];\r\n\r\nvar weekNames = [ \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"];\r\n\r\nvar dayStr = d3.time.format(\"%a, %b %d %Y\");\r\nvar newD = new Date(strDate);\r\n\r\n//console.log(\"dayStr(strDate)\");\r\n//console.log(dayStr(strDate));\r\n//console.log(\"strDate.getDay()\");\r\n//console.log(newD.getDay());\r\nvar currWeekDay = weekNames[newD.getDay()];\r\n//console.log(currWeekDay);\r\nvar arrDate = strDate.split(\"-\");\r\n\r\nif (arrDate[1].substring(0,1) != \"0\") \r\n{\t\r\n\t//console.log(\"typeof(arrDate[1]): 2\");\r\n\t//console.log(typeof(arrDate[1]));\r\n\t//console.log(arrDate[1].substring(0,1) );\r\n\tvar currmonth = monthNames[Number(arrDate[1])-1];\r\n}\r\nelse \r\n{\r\n\t//console.log(\"typeof(arrDate[1]) : 1\");\r\n\t//console.log(typeof(arrDate[1]));\r\n\t//console.log(arrDate[1].substring(0,1) );\r\n\tvar currmonth = monthNames[Number(arrDate[1].substring(1,2))-1];\r\n}\r\nstrDateX  = currWeekDay + \", \" + currmonth + \" \" + arrDate[2] + \" \" + arrDate[0];\r\n\r\nreturn strDateX;\r\n}\r\n\r\nfunction buildSelectData (strDt, StrClass, dtNm) {\r\n\tSelectedData = [];\r\n\t//console.log(\"StrClass:\" + StrClass)\r\n\t//var strDate = \"#\"+strDt;\r\n\t//console.log(\"StrClass:\" + StrClass + \"|strDate:\"+strDate)\r\n\t//d3.select(strDate).style(\"stroke:red;\");\r\n\t\r\n\t//console.log(\"dtNm\");\r\n\t//console.log(dtNm);\r\n\t\r\n\t\r\n\tvar displayDt = buildDisplayDate(strDt);\r\n\t//if (origDt !=\"\") \r\n\td3.select(\"#currDate\").text(displayDt);\r\n\t//else d3.select(\"#currDate\").text(strDt);\r\n\tselectedDate = strDt;\r\n\ttry { document.getElementById(strDt).focus();\r\n\t}\r\n\tcatch(err)\r\n\t{}\r\n\t//console.log(\"StrClass\");\r\n\t//console.log(StrClass);\r\n\tvar strFile = \"\";\r\n\tvar strFileErr = \"\";\r\n\t\r\n\tvar strFileErrCnt = \"\";\r\n\r\n\tvar errMsgs = [];\r\n\tvar errMsgsCnt = []\r\n\tvar fileLayout = [];\r\n\t\r\n\tBIGDATA.forEach(function (d) {\r\n\t\t\r\n\t\tif (strDt == d.Date) \r\n\t\t{\r\n\t\t\tif (typeof(d.File_Layouts) == \"string\") \r\n\t\t\t{ \r\n\t\t\tvar strFilString = d.File_Layouts;\r\n\t\t\tstrCurrFile = strFilString.split(\"|\");\r\n\t\t\tstrCurrFile.forEach (function(d) {\r\n\t\t\t\tif (strFile.indexOf(d) == -1 && (d !=\"\") ) strFile = strFile + d + \"|\";\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\tif (typeof(d.Error_Msgs) == \"string\") \r\n\t\t\t{ \r\n\t\t\tvar strErrString = d.Error_Msgs;\r\n\t\t\tstrCurrErr = strErrString.split(\"|\");\r\n\t\t\t\r\n\t\t\tfor (var i=0;i<strCurrErr.length;i++)\r\n\t\t\t\t{\r\n\t\t\t\tif (strFileErr.indexOf(strCurrErr[i]) == -1 && (i%2 == 0) ) \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tstrFileErr = strFileErr + strCurrErr[i] + \"|\";\r\n\t\t\t\t\t\tstrFileErrCnt = strFileErrCnt + strCurrErr[i] + \"-\" + strCurrErr[i+1] + \"|\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (typeof(strFileErr) == \"string\") {\r\n\t\t\t\tvar arrErr = strFileErr.split(\"|\");\r\n\t\t\t\tarrErr.forEach( function(d) {\r\n\t\t\t\tif (d != \"\") errMsgs.push(d);\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\tif (typeof(strFileErrCnt) == \"string\") {\r\n\t\t\t\tvar arrErrCnt = strFileErrCnt.split(\"|\");\r\n\t\t\t\tarrErrCnt.forEach( function(d) {\r\n\t\t\t\tif (d != \"\") errMsgsCnt.push(d);\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\tif (typeof(strFile) == \"string\") {\r\n\t\t\t\tvar arrFileLayout = strFile.split(\"|\");\r\n\t\t\t\tarrFileLayout.forEach( function(d) {\r\n\t\t\t\tif (d != \"\") fileLayout.push(d);\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\tvar datarow = {\r\n\t\t\t\t\t\t\"Date\" : d.Date,\r\n\t\t\t\t\t\t\"Tot_Records\" :  parseInt(d.Tot_Records),\r\n\t\t\t\t\t\t\"Tot_Inserts\" : parseInt(d.Tot_Inserts),\r\n\t\t\t\t\t\t\"Tot_Updates\" : parseInt(d.Tot_Updates),\r\n\t\t\t\t\t\t\"Tot_Failures\" : parseInt(d.Tot_Failures),\r\n\t\t\t\t\t\t\"Tot_Duration_Secs\" : Number(d.Tot_Duration_Secs),\r\n\t\t\t\t\t\t\"Tot_Duration_Hrs\" : Number(d.Tot_Duration_Hrs),\r\n\t\t\t\t\t\t\"File_Layouts\" : fileLayout.length,\r\n\t\t\t\t\t\t\"Error_Msgs\" : errMsgs.length,\r\n\t\t\t\t\t\t\"Files\" : fileLayout,\r\n\t\t\t\t\t\t\"Errors\" : errMsgs,\r\n\t\t\t\t\t\t\"Errors_cnt\" : arrErrCnt,\r\n\t\t\t\t\t\t\"tot_emails\" : parseInt(d.tot_emails),\r\n\t\t\t\t\t\t\"tot_unique_emails\" : parseInt(d.tot_unique_emails)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\tSelectedData.push(datarow);\r\n\t\t\t\r\n\t\t\t\r\n\t\t}\r\n\t})\r\n\t//console.log(\"SelectedData\");\r\n\t//console.log(SelectedData);\r\n\t//console.log(typeof(BIGDATA));\r\n\t//console.log(typeof(SelectedData));\r\n\tif (SelectedData.length > 0 ) \r\n\t{\r\n\t\tSelectedData.forEach (function (d) {\r\n\t\t\t\td3.select(\"#dtot\").text(function (x) { return addCommas(d.Tot_Records);});\r\n\t\t\t\td3.select(\"#derr\").text(function (x) { return addCommas(d.Tot_Failures);});\r\n\t\t\t\td3.select(\"#dupd\").text(function (x) { return addCommas(d.Tot_Updates);});\r\n\t\t\t\td3.select(\"#dnew\").text(function (x) { return addCommas(d.Tot_Inserts);});\r\n\t\t\t\td3.select(\"#ddurH\").text(function (x) { return addCommas(d.Tot_Duration_Hrs);});\r\n\t\t\t\td3.select(\"#dfile\").text(function (x) { return addCommas(d.File_Layouts);});\r\n\t\t\t\td3.select(\"#derrM\").text(function (x) { return addCommas(d.Error_Msgs);});\r\n\t\t\t\td3.select(\"#demail\").text(function (x) { return addCommas(d.tot_unique_emails);});\r\n\t\t\t\t//d3.select(\"#dtot\").style(\"color\" , \"rgba(51, 102, 153,1)\");\r\n\t\t\t\tif(d.Tot_Failures > 0 || d.Error_Msgs > 0) { \r\n\t\t\t\t\td3.selectAll(\".label2\").style(\"color\" , \"rgba(165,0,38,.7)\");\r\n\t\t\t\t\t//d3.select(\"#derr\").style(\"color\" , \"rgba(165,0,38,.7)\");\r\n\t\t\t\t\t//d3.select(\"#dtot\").style(\"color\" , \"rgba(51, 102, 153,1)\");\r\n\t\t\t\t}\r\n\t\t\t\t//else d3.select(\"#derr\").style(\"color\" , \"rgba(0,104,55,1)\");\r\n\t\t\t\telse d3.selectAll(\".label2\").style(\"color\" , \"rgba(0,104,55,1)\");\r\n\t\t\t\t//d3.select(\"#dupd\").style(\"color\" , \"rgba(51, 102, 153,1)\");\r\n\t\t\t\t//d3.select(\"#dnew\").style(\"color\" , \"rgba(51, 102, 153,1)\");\r\n\t\t\t\t//d3.select(\"#ddurH\").style(\"color\" , \"rgba(165,0,38,.7)\");\r\n\t\t\t\t//d3.select(\"#dfile\").style(\"color\" , \"rgba(51, 102, 153,1)\");\r\n\t\t\t\t//d3.select(\"#derrM\").style(\"color\" , \"rgba(165,0,38,.7)\");\r\n\t\t\t});\r\n\t\t\r\n\t}\r\n\telse\r\n\t{\r\n\t\t//d3.selectAll(\".label2\").style(\"color\" , \"color:#fff;rgba(179,179,179,1)\");\r\n\t\td3.selectAll(\".label2\").style(\"color\" , \"#fff\");\r\n\t\td3.select(\"#dtot\").text(\"00,000,000\");\r\n\t\td3.select(\"#derr\").text(\"00,000\");\r\n\t\td3.select(\"#dupd\").text(\"00,000,000\");\r\n\t\td3.select(\"#dnew\").text(\"00,000,000\");\r\n\t\td3.select(\"#ddurH\").text(\"00.00\");\r\n\t\td3.select(\"#dfile\").text(\"000\");\r\n\t\td3.select(\"#derrM\").text(\"000\");\r\n\t\td3.select(\"#demail\").text(\"000\");\r\n\t\t\r\n\t}\r\n\t//console.log(\"selectedDateLast:\" + selectedDateLast);\r\n\t//document.getElementById(selectedDateLast).focus();\r\n\t//var idSelect = \"#\"+selectedDateLast;\r\n\t//document.getElementById(selectedDateLast).attr(\"style\", \"stroke:red\");\r\n\t//d3.select(\"#dtot\").text( function(d) {SelectedData[0].Tot_Records;});\r\n\t\r\n\tbuildDataTable();\r\n\t//LineChartData();\r\n}\r\n\r\nfunction buildDataTable()\r\n{\r\n\r\n// d3.select(\".dataFile_err\").selectAll(\".fileList\").remove();\r\n d3.selectAll(\".fileListDiv\").remove();\r\n d3.selectAll(\".fileDataDiv\").remove();\r\n d3.selectAll(\".errDataDiv\").remove();\r\n //d3.select(\".dataFile_err\").selectAll(\".errData\").remove();\r\n \r\n \r\n  \r\n d3.select(\".fileList\")\r\n  .append(\"div\")\r\n  .attr(\"class\", \"fileListDiv\")\r\n  .attr(\"valign\", \"top\")\r\n  .attr(\"align\", \"right\");\r\n\r\n d3.select(\".fileData\")\r\n\t.append(\"div\")\r\n    .attr(\"class\", \"fileDataDiv\")\r\n\t.attr(\"valign\", \"top\")\r\n\t.attr(\"align\", \"left\");\r\n\t\r\nd3.select(\".errData\")\r\n\t.append(\"div\")\r\n    .attr(\"class\", \"errDataDiv\")\r\n\t.attr(\"valign\", \"top\")\r\n\t.attr(\"align\", \"left\");\r\n\t\r\n \r\n\t\r\n \r\n\t\t// the columns you'd like to display\r\n var columns = [\"Error\", \"Count\"];\r\n var columnsFile = [\"Layouts\"];\r\n var columnsFileLayout = [\"Category\"];\r\n var dataTB = [];\r\n var dataFile = [];\r\n var File = [];\r\n\t//var columns = [\"Files\"];\r\nvar fileList = \"\";\r\n\tif (SelectedData.length > 0 ) \r\n\t{\r\n\t\tSelectedData.forEach (function (d) {\r\n\t\t////console.log(d.Files);\r\n\t\t////console.log(d.Errors);\r\n\t\t//console.log(d.Errors_cnt);\r\n\t\t//dataTB = d.Errors_cnt;\r\n\t\td.Errors_cnt.forEach ( function(d) {\r\n\t\tvar arrStr = d.split(\"-\");\r\n\t\t////console.arrStr;\r\n\t\tif(arrStr[0] != \"\") \r\n\t\t{\t\r\n\t\t\tvar datarow = { \"Error\" : arrStr[0] , \"Count\" : parseInt(arrStr[1]) }\r\n\t\t\tdataTB.push(datarow);}\r\n\t\t});\r\n\t\t\r\n\t\t\r\n\t\td.Files.forEach ( function(d) {\r\n\t\t\r\n\t\tvar fileClass = \"\";\r\n\t\t\t\tvar val = d.substring(0,3);\r\n\t\t\t\t//console.log(\"val: \" + val);\r\n\t\t\t\tswitch (val)\r\n\t\t\t\t{\r\n\t\t\t\t\tcase \"eli\":\r\n\t\t\t\t\t\tfileClass = \"Eligibility\"\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"pro\":\r\n\t\t\t\t\t\tfileClass = \"Provider\"\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"ceg\":\r\n\t\t\t\t\t\tfileClass = \"CEG\"\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"lab\":\r\n\t\t\t\t\t\tfileClass = \"LAB\"\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"PHA\":\r\n\t\t\t\t\t\tfileClass = \"Pharmacy Claims\"\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"CLA\":\r\n\t\t\t\t\t\tfileClass = \"Medical Claims\"\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\tvar datarow = { \"Layouts\" : d , \"Fclass\" : fileClass } \r\n\t\tdataFile.push(datarow);\r\n\t\t\r\n\t\t\r\n\t\t//console.log(\"fileList\");\r\n\t\t//console.log(fileList);\r\n\t\tif (fileList.indexOf(fileClass) == -1) {\r\n\t\t\t//console.log(\"fileList.indexOf(d) == -1\");\r\n\t\t\t//console.log(d);\r\n\t\t\tvar datarow = { \"Category\" : fileClass } \r\n\t\t\tfileList = fileList + fileClass + \"|\";\r\n\t\t\tFile.push(datarow);\r\n\t\t\t}\r\n\t\t\r\n\t\t});\r\n\t\t\r\n\t})}\r\n//console.log(\"dataFile\");\r\n//console.log(dataFile);\r\n\r\n\r\nif(dataTB.length > 0)\r\n{\r\n d3.select(\".errDataDiv\")\r\n  .append(\"table\")\r\n  .attr(\"border\", borderT)\r\n  .attr(\"cellpadding\" , cellpaddingD)\r\n  .attr(\"class\", \"dataTable\")\r\n  .append(\"thead\")\r\n  .append(\"tr\")\r\n        .selectAll(\"th\")\r\n        .data(columns)\r\n        .enter()\r\n        .append(\"th\")\r\n            .text(function(column) { return column; })\r\n\t\t\t.attr(\"align\", \"left\");\r\n \r\nvar tbody  = d3.select(\".dataTable\")\r\n  .append(\"tbody\");\r\n  \r\n var rows = tbody.selectAll(\"tr\")\r\n        .data(dataTB)\r\n        .enter()\r\n        .append(\"tr\");\r\n\t\r\nvar cells = rows.selectAll(\"td\")\r\n        .data(function(row) {\r\n            //console.log(row.error);\r\n\t\t\treturn columns.map(function(column) {\r\n                //console.log(\"column: \" + column);\r\n\t\t\t\t//var dataRow = {column: column, value: row[column]};\r\n\t\t\t\tvar dataRow = {column: column, value: addCommas(row[column])};\r\n\t\t\t\t//console.log(dataRow);\r\n\t\t\t\t//return {column: column, value: row[column]};\r\n\t\t\t\treturn dataRow;\r\n            });\r\n\t\t\t})\r\n        .enter()\r\n        .append(\"td\")\r\n            .text(function(d) { return d.value; })\r\n\t\t\t.attr(\"align\", \"left\");\r\n\t}\r\nif(dataFile.length > 0)\r\n{\r\n d3.select(\".fileDataDiv\")\r\n  .append(\"table\")\r\n  .attr(\"border\", borderT)\r\n  .attr(\"cellpadding\" , cellpaddingD)\r\n  .attr(\"class\", \"fileTable\")\r\n  .append(\"thead\")\r\n  .append(\"tr\")\r\n        .selectAll(\"th\")\r\n        .data(columnsFile)\r\n        .enter()\r\n        .append(\"th\")\r\n            .text(function(column) { return column; })\r\n\t\t\t.attr(\"align\", \"right\");\r\n \r\nvar tbody  = d3.select(\".fileTable\")\r\n  .append(\"tbody\");\r\n  \r\n var rows = tbody.selectAll(\"tr\")\r\n        .data(dataFile)\r\n        .enter()\r\n        .append(\"tr\");\r\n\t\r\nvar cells = rows.selectAll(\"td\")\r\n        .data(function(row) {\r\n            //console.log(row.error);\r\n\t\t\treturn columnsFile.map(function(column) {\r\n                //console.log(\"column: \" + column);\r\n\t\t\t\t//var dataRow = {column: column, value: row[column]};\r\n\t\t\t\tvar fileClass = \"\";\r\n\t\t\t\tvar val = row[column].substring(0,3);\r\n\t\t\t\t//console.log(\"val: \" + val);\r\n\t\t\t\tswitch (val)\r\n\t\t\t\t{\r\n\t\t\t\t\tcase \"eli\":\r\n\t\t\t\t\t\tfileClass = \"Eligibility\"\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"pro\":\r\n\t\t\t\t\t\tfileClass = \"Provider\"\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"ceg\":\r\n\t\t\t\t\t\tfileClass = \"CEG\"\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"lab\":\r\n\t\t\t\t\t\tfileClass = \"LAB\"\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"PHA\":\r\n\t\t\t\t\t\tfileClass = \"Pharmacy Claims\"\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"CLA\":\r\n\t\t\t\t\t\tfileClass = \"Medical Claims\"\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tvar dataRow = {column: column, value: row[column], Fclass: fileClass};\r\n\t\t\t\t//console.log(dataRow);\r\n\t\t\t\t//return {column: column, value: row[column]};\r\n\t\t\t\treturn dataRow;\r\n            });\r\n\t\t\t})\r\n        .enter()\r\n        .append(\"td\")\r\n\t\t.attr(\"align\", \"right\")\r\n            .text(function(d) { return d.value; });\r\n\t\t\t\r\n\t//console.log(\"File\")\r\n\t//console.log(File)\r\n\r\nd3.select(\".fileListDiv\")\r\n  .append(\"table\")\r\n  .attr(\"border\", borderT)\r\n  .attr(\"cellpadding\" , cellpaddingD)\r\n  .attr(\"class\", \"fileLTable\")\r\n  .append(\"thead\")\r\n  .append(\"tr\")\r\n        .selectAll(\"th\")\r\n        .data(columnsFileLayout)\r\n        .enter()\r\n        .append(\"th\")\r\n            .text(function(column) { return column; })\r\n\t\t\t.attr(\"align\", \"left\");\r\n \r\nvar tbody  = d3.select(\".fileLTable\")\r\n  .append(\"tbody\");\r\n  \r\n var rows = tbody.selectAll(\"tr\")\r\n        .data(File)\r\n        .enter()\r\n        .append(\"tr\");\r\n\t\r\nvar cells = rows.selectAll(\"td\")\r\n        .data(function(row) {\r\n            //console.log(row.error);\r\n\t\t\treturn columnsFileLayout.map(function(column) {\r\n                //console.log(\"column: \" + column);\r\n\t\t\t\t//var dataRow = {column: column, value: row[column]};\r\n\t\t\t\tvar dataRow = {column: column, value: row[column]};\r\n\t\t\t\t//console.log(dataRow);\r\n\t\t\t\t//return {column: column, value: row[column]};\r\n\t\t\t\treturn dataRow;\r\n\t\t\t\t\t});\r\n\t\t\t})\r\n        .enter()\r\n        .append(\"td\")\r\n            .text(function(d) { return d.value; })\r\n\t\t\t.attr(\"align\", \"right\");\r\n\t}\r\n\r\n \r\n}\r\nfunction buildSummaryData () {\r\n\t\r\n\tvar Summ_Recs = 0;\r\n\tvar Summ_Err = 0;\r\n\tvar Summ_Upd = 0;\r\n\tvar Summ_New = 0;\r\n\t\r\n\tvar Summ_Email = 0;\r\n\t\r\n\tvar Summ_Load_sec = 0.00;\r\n\tvar Summ_Load_hr = 0.00;\r\n\tvar Summ_days = 0;\r\n\tvar Summ_days_err = 0;\r\n\t\r\n\tvar strFile = \"\";\r\n\tvar strFileErr = \"\";\r\n\tSummaryData = [];\r\n\tvar errMsgs = [];\r\n\tvar fileLayout = [];\r\n\t\r\n\t//console.log(BIGDATA);\r\n\tBIGDATA.forEach(function (d) {\r\n\t\tif (! isNaN(d.Tot_Records)) Summ_Recs = Summ_Recs + parseInt(d.Tot_Records);\r\n\t\tif (! isNaN(d.Tot_Failures)) Summ_Err = Summ_Err + parseInt(d.Tot_Failures);\r\n\t\tif (! isNaN(d.Tot_Updates)) Summ_Upd = Summ_Upd + parseInt(d.Tot_Updates);\r\n\t\tif (! isNaN(d.Tot_Inserts)) Summ_New = Summ_New + parseInt(d.Tot_Inserts);\r\n\t\tif (! isNaN(d.Tot_Duration_Hrs)) Summ_Load_hr = Summ_Load_hr + d3.round(Number(d.Tot_Duration_Hrs),2);\r\n\t\tif (! isNaN(d.Tot_Duration_Secs)) Summ_Load_sec = Summ_Load_sec + d3.round(Number(d.Tot_Duration_Secs),2);\r\n\t\tif (! isNaN(d.tot_unique_emails)) Summ_Email = Summ_Email + parseInt(d.tot_unique_emails);\r\n\t\t\r\n\t\tSumm_days  = Summ_days +1;\r\n\t\tif (d.Tot_Failures > 0) Summ_days_err = Summ_days_err +1;\r\n\t\t\r\n\t\tif (typeof(d.File_Layouts) == \"string\") \r\n\t\t{ \r\n\t\t\tvar strFilString = d.File_Layouts;\r\n\t\t\tstrCurrFile = strFilString.split(\"|\");\r\n\t\t\tstrCurrFile.forEach (function(d) {\r\n\t\t\t\tif (strFile.indexOf(d) == -1 && (d !=\"\") ) strFile = strFile + d + \"|\";\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (typeof(d.Error_Msgs) == \"string\") \r\n\t\t{ \r\n\t\t\tvar strErrString = d.Error_Msgs;\r\n\t\t\tstrCurrErr = strErrString.split(\"|\");\r\n\t\t\t\r\n\t\t\tfor (var i=0;i<strCurrErr.length;i++)\r\n\t\t\t{\r\n\t\t\t\tif (strFileErr.indexOf(strCurrErr[i]) == -1 && (i%2 == 0) ) \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tstrFileErr = strFileErr + strCurrErr[i] + \"|\";\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\tif (typeof(strFileErr) == \"string\") {\r\n\t\tvar arrErr = strFileErr.split(\"|\");\r\n\t\tarrErr.forEach( function(d) {\r\n\t\t\t\tif (d != \"\") errMsgs.push(d);\r\n\t\t\t})\r\n\t}\r\n\tif (typeof(strFile) == \"string\") {\r\n\t\tvar arrFileLayout = strFile.split(\"|\");\r\n\t\tarrFileLayout.forEach( function(d) {\r\n\t\t\t\tif (d != \"\") fileLayout.push(d);\r\n\t\t\t})\r\n\t}\r\n\r\n\tvar datarow = {\r\n\t\t\t\t\t\t\"Tot_Records\" :  Summ_Recs,\r\n\t\t\t\t\t\t\"Tot_Inserts\" : Summ_New,\r\n\t\t\t\t\t\t\"Tot_Updates\" : Summ_Upd,\r\n\t\t\t\t\t\t\"Tot_Failures\" : Summ_Err,\r\n\t\t\t\t\t\t\"Tot_Duration_Secs\" : d3.round(Summ_Load_sec,2),\r\n\t\t\t\t\t\t\"Tot_Duration_Hrs\" : d3.round(Summ_Load_hr,2),\r\n\t\t\t\t\t\t\"File_Layouts\" : fileLayout.length,\r\n\t\t\t\t\t\t\"Error_Msgs\" : errMsgs.length,\r\n\t\t\t\t\t\t\"Tot_days\" : Summ_days-1,\r\n\t\t\t\t\t\t\"Tot_Err_days\" :Summ_days_err-1,\r\n\t\t\t\t\t\t\"Files\" : fileLayout,\r\n\t\t\t\t\t\t\"Errors\" : errMsgs,\r\n\t\t\t\t\t\t\"tot_unique_emails\" :  Summ_Email\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\tSummaryData.push(datarow);\r\n\t//console.log(SummaryData);\r\n\tif (SummaryData.length > 0 ) \r\n\t{\r\n\t\tSummaryData.forEach (function (d) {\r\n\t\t\t\td3.select(\"#Sdtot\").text(function (x) { return addCommas(d.Tot_Records);});\r\n\t\t\t\td3.select(\"#Sderr\").text(function (x) { return addCommas(d.Tot_Failures);});\r\n\t\t\t\td3.select(\"#Sdupd\").text(function (x) { return addCommas(d.Tot_Updates);});\r\n\t\t\t\td3.select(\"#Sdnew\").text(function (x) { return addCommas(d.Tot_Inserts);});\r\n\t\t\t\td3.select(\"#SddurH\").text(function (x) { return addCommas(d.Tot_Duration_Hrs);});\r\n\t\t\t\td3.select(\"#Sdfile\").text(function (x) { return addCommas(d.File_Layouts);});\r\n\t\t\t\td3.select(\"#SderrM\").text(function (x) { return addCommas(d.Error_Msgs);});\r\n\t\t\t\td3.select(\"#SderrDAYS\").text(function (x) { return addCommas(d.Tot_Err_days);});\r\n\t\t\t\td3.select(\"#SdDAYS\").text(function (x) { return addCommas(d.Tot_days);});\r\n\t\t\t\td3.select(\"#Sdemail\").text(function (x) { return addCommas(d.tot_unique_emails);});\r\n\t\t\t});\r\n\t}\r\n\telse\r\n\t{\r\n\t\td3.select(\"#Sdtot\").text(\"\");\r\n\t\td3.select(\"#Sderr\").text(\"\");\r\n\t\td3.select(\"#Sdupd\").text(\"\");\r\n\t\td3.select(\"#Sdnew\").text(\"\");\r\n\t\td3.select(\"#SddurH\").text(\"\");\r\n\t\td3.select(\"#Sdfile\").text(\"\");\r\n\t\td3.select(\"#SderrM\").text(\"\");\r\n\t\td3.select(\"#SderrDAYS\").text(\"\");\r\n\t\td3.select(\"#SdDAYS\").text(\"\");\r\n\t\td3.select(\"#Sdemail\").text(\"\");\r\n\t\t\r\n\t}\r\n\tLineChartData();\r\n\t\r\n}\r\n\r\nfunction LineChartData(){\r\n\r\nconsole.log(\"allDays\");\r\nlineData = [];\r\n\r\nDateArr = d3.nest()\r\n\t\t\t.key(function(d) { return d.day; })\r\n\t\t\t.rollup(function(d) {return 0;})\r\n\t\t\t.map(allDays);\r\n\t\t\t\r\nDateArrCumm = d3.nest()\r\n\t\t\t.key(function(d) { return d.day; })\r\n\t\t\t.rollup(function(d) {return 0;})\r\n\t\t\t.map(allDays);\r\n\t\t\t\r\nvar finalCnt = 0;\r\n//var parseDate = d3.time.format(\"%Y%m%d\").parse\r\n\r\nfor(var y in DateArr) {\r\n\tfor (var z in dataBIG) {\r\n\t\t\tif (y == z) \r\n\t\t\t{\r\n\t\t\t\tDateArr[y] = dataBIG[z];\r\n\t\t\t\tfinalCnt = finalCnt + dataBIG[z];\r\n\t\t\t\t//console.log(dataBIG[z]);\r\n\t\t\t}\r\n\t\t}\r\n\tDateArrCumm[y] = finalCnt;\r\n\tvar format = d3.time.format(\"%Y-%m-%d\");\r\n\tvar strVal = document.getElementById(select_1).textContent;\r\n\t\r\n\tvar datarow = { \"date\" : format.parse(y)\r\n\t\t\t\t\t//, \"cumm\" : finalCnt\r\n\t\t\t\t\t,\"Cnt\" : DateArr[y]\r\n\t\t\t\t\t//, strVal : DateArr[y]\r\n\t\t}\r\n\tlineData.push(datarow);\r\n\t}\r\nconsole.log(DateArr);\r\nconsole.log(DateArrCumm);\r\nconsole.log(lineData);\r\n\r\nd3.selectAll(\".lineChart\").remove();\r\n\r\n//console.log(document.getElementById(\"lineChartRow1\").style.width);\r\n//var margin = {top: 20, right: 80, bottom: 30, left: 50},\r\nvar margin = {top: 20, right: 60, bottom: 20, left: 30},\r\n\twidth = widthLine - margin.left - margin.right,\r\n    height = heightLine - margin.top - margin.bottom;\r\n\r\nvar parseDate = d3.time.format(\"%Y%m%d\").parse;\r\n\r\n\r\n\r\nvar formatPercent = d3.format(\".0%\");\r\n\r\nvar x = d3.time.scale()\r\n\t.domain([new Date(lineData[0].date), d3.time.day.offset(new Date(lineData[lineData.length - 1].date), 1)])\r\n    .range([0, width/300])\r\n//console.log(x.domain());\r\n//console.log(x.range());\r\n//console.log(x.ticks());\r\n\r\nvar y = d3.scale.linear()\r\n\t.domain([0, d3.max(lineData, function(d) { return d.Cnt; })])\r\n    .range([height, 0]);\r\n\r\nvar xAxis = d3.svg.axis()\r\n\t\t.scale(x)\r\n\t\t.orient(\"bottom\")\r\n\t\t//.ticks(d3.time.days, 1)\r\n\t\t.tickFormat(d3.time.format('%b'))\r\n\t\t//.tickSize(0)\r\n\t\t//.tickPadding(8);\r\n\t//.text(function(d) {console.log(d);} );\r\n\t\r\nvar yAxis = d3.svg.axis()\r\n    .scale(y)\r\n    .orient(\"left\")\r\n    .tickFormat(formatPercent);\r\n\r\nvar tip = d3.tip()\r\n  .attr('class', 'd3-tip')\r\n  .offset([-10, 0])\r\n  .html(function(d) {\r\n    return \"<strong>Records:</strong> <span style='color:red'>\" + d.Cnt + \"</span>\";\r\n  })\t\r\n  \r\n\r\nvar svg = d3.select(\"#DivlineChart1\")\r\n\t.append(\"svg\")\r\n\t.attr(\"class\" , \"lineChart\")\r\n    .attr(\"width\", (width + margin.left + margin.right) * 1.05)\r\n    .attr(\"height\", height + margin.top + margin.bottom)\r\n  .append(\"g\")\r\n    .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\r\n\t\r\nx.domain(lineData.map(function(d) { return d.date; }));\r\ny.domain([0, d3.max(lineData, function(d) { return d.Cnt; })]);\r\n\t\r\nsvg.call(tip);\r\n\r\nsvg.append(\"g\")\r\n      .attr(\"class\", \"x axis\")\r\n      .attr(\"transform\", \"translate(0,\" + height + \")\")\r\n\t  //.attr(\"x\", function(d) { //console.log(x(d.date)); \r\n\t\t//return parseInt(x(d.date)/300); })\r\n      .call(xAxis);\r\n\r\n  svg.append(\"g\")\r\n      .attr(\"class\", \"y axis\")\r\n      //.call(yAxis)\r\n    .append(\"text\")\r\n      .attr(\"transform\", \"rotate(-90)\")\r\n      .attr(\"y\", 6)\r\n      .attr(\"dy\", \".71em\")\r\n      .style(\"text-anchor\", \"end\")\r\n      //.text(\"Record Count\");\r\n\r\nsvg.append(\"text\")\r\n        .attr(\"x\", (width / 2))             \r\n        //.attr(\"y\", 0 - (margin.top/2))\r\n\t\t.attr(\"y\", 0 - (height/30))\r\n        .attr(\"text-anchor\", \"middle\") \r\n\t\t//.style(\"color\" , \"rgba(51, 102, 153,.5)\")\r\n\t\t//.attr(\"style\" , \"font-color:red;\")\r\n\t\t//.attr(\"font-color\" , \"blue;\")\r\n        //.style(\"font-size\", \"16px\") \r\n        //.style(\"text-decoration\", \"underline\")  \r\n        .text(\"ANNUAL TREND BAR CHART FOR \" + document.getElementById(select_1).textContent);\r\n\t\r\n//console.log(d3.select(\".RdYlGn\").selectAll(\".rect\")[0]); \r\nvar objCalendar = d3.select(\".RdYlGn\").selectAll(\".rect\")[0].parentNode;\r\nvar objCalendar_g = objCalendar.children;\r\nvar objCalendar_g_children = objCalendar_g[0].children;\r\n//console.log(objCalendar_g_children[0].style); \r\n\t\t\r\n var rect = svg.selectAll(\".bar\")\r\n      .data(lineData)\r\n    .enter().append(\"rect\")\r\n      .attr(\"class\", \"bar\")\r\n\t  .attr(\"id\", function(d) { return buildDataview (d.date, \"\");})\r\n      .attr(\"x\", function(d) { //console.log(x(d.date)); \r\n\t\treturn parseInt(x(d.date)); })\r\n\t  .attr(\"width\", widthbar)\r\n      .attr(\"y\", function(d) { return y(d.Cnt); })\r\n      .attr(\"height\", function(d) { return height - y(d.Cnt); })\r\n\t  .on('mouseover', function(d) {\r\n\t  \r\n\t\tthis.style.fill = \"red\";\r\n\t\tfor(var i =0; i < objCalendar_g_children.length; i++ ) {\r\n\t\t\t\tobjCalendar_g_children[i].style.outline = \"\";\r\n\t\t\t\tobjCalendar_g_children[i].style.outlineColor  = \"\";\r\n\t\t\t\tobjCalendar_g_children[i].style.outlineWidth = \"\";\r\n\t\t\t}\r\n\t\tvar ClassNameSelected;\r\n\t\t\r\n\t\tfor(var i =0; i < objCalendar_g_children.length; i++ ) {\r\n\t\t\tif (objCalendar_g_children[i].id == buildDataview(d.date, \"\")) {\r\n\t\t\t\t//console.log(objCalendar_g_children[i].id);\r\n\t\t\t\t//console.log(objCalendar_g_children[i].className.baseVal);\r\n\t\t\t\t//console.log(objCalendar_g_children[i].style); \r\n\t\t\t\t//console.log(objCalendar_g_children[i].style.outline); \r\n\t\t\t\t//console.log(objCalendar_g_children[i].style.outlineColor);\r\n\t\t\t\t//console.log(objCalendar_g_children[i].style.outlineWidth);\r\n\t\t\t\tobjCalendar_g_children[i].style.outline = \"solid\";\r\n\t\t\t\tobjCalendar_g_children[i].style.outlineColor  = \"red\";\r\n\t\t\t\tobjCalendar_g_children[i].style.outlineWidth = \"1px\";\r\n\t\t\t\tClassNameSelected = objCalendar_g_children[i].className.baseVal;\r\n\t\t\t\tClassNameSelected = ClassNameSelected.replace(\"day \", \"\");\r\n\t\t\t\t//console.log(ClassNameSelected);\r\n\t\t\t\t\r\n\t\t\t }\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\r\n\t\t//console.log(d3.select(\".RdYlGn\").selectAll(\".rect\")[0]); \r\n\t\tvar objLegend = d3.select(\".legend\").selectAll(\".rect\")[0].parentNode;\r\n\t\tvar objLegend_g = objLegend.children;\r\n\t\t//console.log(objLegend_g); \r\n\t\tfor(var i =0; i < objLegend_g.length; i++ ) {\r\n\t\t\tif(objLegend_g[i].children[0].id == ClassNameSelected) {\r\n\t\t\tconsole.log(objLegend_g[i].children[0].id)\r\n\t\t\tobjLegend_g[i].children[0].style.outline = \"solid\";\r\n\t\t\tobjLegend_g[i].children[0].style.outlineColor  = \"red\";\r\n\t\t\tobjLegend_g[i].children[0].style.outlineWidth = \"1px\";\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t//var objLegend_g_children = objLegend_g[0].children;\r\n\t\t//console.log(objLegend_g_children[0].style); \r\n\t\t\t\r\n\t\tbuildSelectData(buildDataview (d.date, \"\"),\"\",\"\");})\r\n   .on('mouseout', function(d){\r\n\t  \r\n\t\tthis.style.fill = \"rgba(0,0,255,0.9)\";\r\n\t\tfor(var i =0; i < objCalendar_g_children.length; i++ ) {\r\n\t\t\tif (objCalendar_g_children[i].id == buildDataview(d.date, \"\")) {\r\n\t\t\t\tobjCalendar_g_children[i].style.outline = \"\";\r\n\t\t\t\tobjCalendar_g_children[i].style.outlineColor  = \"\";\r\n\t\t\t\tobjCalendar_g_children[i].style.outlineWidth = \"\";\r\n\t\t\t }\r\n\t\t\t}\r\n\t\t\t\r\n\t\t//console.log(d3.select(\".RdYlGn\").selectAll(\".rect\")[0]); \r\n\t\tvar objLegend = d3.select(\".legend\").selectAll(\".rect\")[0].parentNode;\r\n\t\tvar objLegend_g = objLegend.children;\r\n\t\t//console.log(objLegend_g); \r\n\t\tfor(var i =0; i < objLegend_g.length; i++ ) {\r\n\t\t\t//if(objLegend_g[i].children[0].id == ClassNameSelected) {\r\n\t\t\t//console.log(objLegend_g[i].children[0].id)\r\n\t\t\tobjLegend_g[i].children[0].style.outline = \"\";\r\n\t\t\tobjLegend_g[i].children[0].style.outlineColor  = \"\";\r\n\t\t\tobjLegend_g[i].children[0].style.outlineWidth = \"\";\r\n\t\t\t//}\r\n\t\t}\r\n\t\t\r\n\t\t})\r\n\t\t\r\nrect.append(\"title\")\r\n\t.text(function(d) {return document.getElementById(select_1).textContent + \" - \" + buildDataview (d.date, \"\") + \": \" + addCommas(d.Cnt);});\r\n}\r\nfunction type(d) {\r\n  d.Cnt = +d.Cnt;\r\n  return d;\r\n}\r\n// End of Line Chart Build\r\nfunction addCommas(nStr)\r\n{\r\n\tnStr += '';\r\n\tx = nStr.split('.');\r\n\tx1 = x[0];\r\n\tx2 = x.length > 1 ? '.' + x[1] : '';\r\n\tvar rgx = /(\\d+)(\\d{3})/;\r\n\twhile (rgx.test(x1)) {\r\n\t\tx1 = x1.replace(rgx, '$1' + ',' + '$2');\r\n\t}\r\n\treturn x1 + x2;\r\n}\r\n//d3.select(\".C4\").on(\"mouseout\" , function() { d3.select(selectedDateLast).classed(\"active\", false)});\r\nd3.select(self.frameElement).style(\"height\", \"2910px\");\r\n\r\n</script>\r\n<script>\r\n  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){\r\n  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\r\n  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\r\n  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');\r\n\r\n  ga('create', 'UA-43984273-1', 'visualizationlab.github.io');\r\n  ga('send', 'pageview');\r\n\r\n</script>","google":"UA-43984273-1","note":"Don't delete this file! It's used internally to help with page regeneration."}